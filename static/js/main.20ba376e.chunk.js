(this["webpackJsonpreact-1"]=this["webpackJsonpreact-1"]||[]).push([[0],{100:function(e,t,n){e.exports={block:"InputProfileInfo_block__2_9WD",field:"InputProfileInfo_field__2t2br",errorField:"InputProfileInfo_errorField__3ecPA",error:"InputProfileInfo_error__1cHdL"}},112:function(e,t,n){"use strict";n.d(t,"d",(function(){return h})),n.d(t,"f",(function(){return O})),n.d(t,"e",(function(){return v})),n.d(t,"c",(function(){return _})),n.d(t,"a",(function(){return x}));var r=n(6),a=n.n(r),s=n(11),c=n(31),i=n(3),o=n(14),u=n(13),l="dialogs/SEND-MESSAGE",d="dialogs/SET_SELECTED_USER_ID",f="dialogs/SET_FRIENDS",b="dialogs/ADD_NEXT_FRIENDS_PAGE_CREATOR",j="dialogs/SET_TOTAL_COUNT_FRIENDS",p="dialogs/SET_PAGE_FRIENDS",g={dialogs:[],friends:[],selectedUserId:null,totalCountFriends:0,pageSize:5,pageFriends:2},h=function(e,t){return{type:l,userId:e,message:t}},O=function(e){return{type:d,selectedUserId:e}},m=function(e){return{type:f,friends:e}},v=function(e){return{type:p,pageFriends:e}},_=function(e,t){return function(){var n=Object(s.a)(a.a.mark((function n(r){var s,c;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,o.d.getUsers(e,t,!0);case 3:s=n.sent,c=s.data.items,r(m(c)),r((a=s.data.totalCount,{type:j,totalCountFriends:a})),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),r(Object(u.c)(n.t0));case 12:case"end":return n.stop()}var a}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()},x=function(e,t){return function(){var n=Object(s.a)(a.a.mark((function n(r){var s;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,o.d.getUsers(e,t,!0);case 3:s=n.sent,r((a=s.data.items,{type:b,friends:a})),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),r(Object(u.c)(n.t0));case 10:case"end":return n.stop()}var a}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(i.a)(Object(i.a)({},e),{},{dialogs:e.dialogs.find((function(e){return e.userId===t.userId}))?e.dialogs.map((function(e){return e.userId===t.userId?{userId:e.userId,messages:[].concat(Object(c.a)(e.messages),[{id:e.messages.length,message:t.message}])}:e})):[].concat(Object(c.a)(e.dialogs),[{userId:t.userId,messages:[{id:0,message:t.message}]}])});case d:return Object(i.a)(Object(i.a)({},e),{},{selectedUserId:t.selectedUserId});case f:return Object(i.a)(Object(i.a)({},e),{},{friends:t.friends});case b:return Object(i.a)(Object(i.a)({},e),{},{friends:[].concat(Object(c.a)(e.friends),Object(c.a)(t.friends))});case j:return Object(i.a)(Object(i.a)({},e),{},{totalCountFriends:t.totalCountFriends});case p:return Object(i.a)(Object(i.a)({},e),{},{pageFriends:t.pageFriends});default:return e}}},124:function(e,t,n){"use strict";var r=n(103),a=n(1),s=n(12),c=n(25),i=n(48),o=n.n(i),u=n(0);t.a=Object(s.b)((function(e){return{followingInProgress:e.usersPage.followingInProgress,isAuth:e.auth.isAuth}}),{unfollow:c.g,follow:c.b})((function(e){var t=e.user,n=e.followingInProgress,s=e.follow,c=e.unfollow,i=e.isAuth,l=Object(a.useState)(!0),d=Object(r.a)(l,2),f=d[0],b=d[1];return Object(a.useEffect)((function(){b(!i)}),[i]),Object(u.jsx)("div",{className:f?o.a.hidden:"",children:t.followed?Object(u.jsx)("button",{disabled:n.some((function(e){return e===t.id})),className:"".concat(o.a.button," ").concat(o.a.follow),onClick:function(){c(t.id)},children:"Follow"}):Object(u.jsx)("button",{disabled:n.some((function(e){return e===t.id})),className:"".concat(o.a.button," ").concat(o.a.unfollow),onClick:function(){s(t.id)},children:"UnFollow"})})}))},13:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return l}));var r=n(3),a=n(30),s="INITIALIZED_SUCCESS",c="SET_GLOBAL_ERROR_SUCCESS",i={initialized:!1,globalError:{mainMessage:"",errorMessage:""}},o=function(e,t){return{type:c,mainMessage:e,errorMessage:t}},u=function(){return function(e){var t=e(Object(a.b)());Promise.all([t]).then((function(){return e({type:s})}))}},l=function(e){return function(t){if(e){var n=e.response?e.response.status:"\u0421\u0442\u0430\u0442\u0443\u0441 \u043e\u0442\u0441\u0443\u0442\u0441\u0432\u0443\u0435\u0442";t(o(function(e){switch(e){case 400:return"\u041a\u043e\u0434 400 - \u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441";case 403:return"\u041a\u043e\u0434 403 - \u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u0430";case 500:return"\u041a\u043e\u0434 500 - \u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430";default:return"\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430"}}(n),e.message))}else t(o("",""))}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:return Object(r.a)(Object(r.a)({},e),{},{initialized:!0});case c:return Object(r.a)(Object(r.a)({},e),{},{globalError:{mainMessage:t.mainMessage,errorMessage:t.errorMessage}});default:return e}}},14:function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o}));var r=n(137),a=n.n(r).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"4695d1e8-8e53-40ac-9b0b-d9e9d8e53801"}}),s={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"false";return a.get("users?page=".concat(e,"&count=").concat(t,"&friend=").concat(n))},findUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return a.get("users?term=".concat(e))},follow:function(e){return a.post("follow/".concat(e),{})},unfollow:function(e){return a.delete("follow/".concat(e))}},c={me:function(){return a.get("auth/me")},login:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;return a.post("auth/login",{email:e,password:t,rememberMe:n,captcha:r})},logout:function(){return a.delete("auth/login")}},i={getProfile:function(e){return a.get("profile/".concat(e))},getStatus:function(e){return a.get("profile/status/".concat(e))},setStatus:function(e){return a.put("profile/status",{status:e})},savePhoto:function(e){var t=new FormData;return t.append("image",e),a.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}})},saveProfile:function(e){return a.put("profile",e)}},o={getCaptchaUrl:function(){return a.get("security/get-captcha-url")}}},141:function(e,t,n){e.exports={news:"News_news__3b_Ht"}},142:function(e,t,n){e.exports={music:"Music_music__2ozzY"}},143:function(e,t,n){e.exports={settings:"Settings_settings__1O3ZQ"}},144:function(e,t,n){e.exports={lds_roller:"Preloader_lds_roller__36ydK"}},145:function(e,t,n){e.exports={block:"Textarea_block__2WNfY",field:"Textarea_field__1f5kU",errorField:"Textarea_errorField__3wnOd",error:"Textarea_error__1Ox-_"}},146:function(e,t,n){},177:function(e,t,n){},18:function(e,t,n){e.exports={nav:"Navbar_nav__3tJyT",links:"Navbar_links__20KC5",item:"Navbar_item__1Uyvu",active:"Navbar_active__leOmI"}},25:function(e,t,n){"use strict";n.d(t,"f",(function(){return I})),n.d(t,"e",(function(){return C})),n.d(t,"c",(function(){return y})),n.d(t,"d",(function(){return U})),n.d(t,"b",(function(){return L})),n.d(t,"g",(function(){return A}));var r=n(6),a=n.n(r),s=n(11),c=n(31),i=n(3),o=n(14),u=function(e,t,n,r){return e.map((function(e){return e[n]===t?Object(i.a)(Object(i.a)({},e),r):e}))},l=n(13),d=n(41),f=n(29),b="users/FOLLOW",j="users/UNFOLLOW",p="users/SET_USERS",g="users/SET_FRIENDS",h="users/SET_SIDEBAR_FRIENDS",O="users/TOGGLE_IS_FETCHING",m="users/TOGGLE_IS_FOLLOWING_PROGRESS",v="users/TOGGLE_IS_FRIENDS",_={users:[],friends:[],sidebarFriends:[],isFetching:!1,isFriends:!1,followingInProgress:[],sidebarSize:5},x=function(e){return{type:j,userId:e}},w=function(e){return{type:b,userId:e}},P=function(e){return{type:p,payload:{users:e}}},S=function(e){return{type:g,payload:{friends:e}}},F=function(e){return{type:h,payload:{sidebarFriends:e}}},E=function(e){return{type:O,isFetching:e}},N=function(e,t){return{type:m,isFetching:e,userId:t}},I=function(e){return{type:v,isFriends:e}},k=function(){var e=Object(s.a)(a.a.mark((function e(t,n,r,s,c,i,u){var f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(E(u)),e.next=4,o.d.getUsers(n,r,i);case 4:f=e.sent,t(c(f.data.items)),t(Object(d.c)(s,f.data.totalCount)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t(Object(l.c)(e.t0));case 12:t(E(!1));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n,r,a,s,c,i){return e.apply(this,arguments)}}(),C=function(e,t){return function(){var n=Object(s.a)(a.a.mark((function n(r){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:k(r,e,t,"users",P,!1,!0);case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},y=function(e,t){return function(){var n=Object(s.a)(a.a.mark((function n(r){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:k(r,e,t,"friends",S,!0,!0);case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},U=function(e,t){return function(){var n=Object(s.a)(a.a.mark((function n(r){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:k(r,e,t,"sidebarFriends",F,!0,!1);case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},T=function(){var e=Object(s.a)(a.a.mark((function e(t,n,r,s,c,i,o){var u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(N(!0,n)),e.next=4,r(n);case 4:if(0!==e.sent.data.resultCode){e.next=13;break}if(t(s(n)),c(t),u=i().profilePage.profile,e.t0=u,!e.t0){e.next=13;break}return e.next=13,o(u.fullName)(t);case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(0),t(Object(l.c)(e.t1));case 18:t(N(!1,n));case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,n,r,a,s,c,i){return e.apply(this,arguments)}}(),L=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n,r){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:T(n,e,o.d.follow.bind(o.d),w,U(1,5),r,f.c);case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},A=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n,r){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:T(n,e,o.d.unfollow.bind(o.d),x,U(1,5),r,f.c);case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(i.a)(Object(i.a)({},e),{},{users:u(e.users,t.userId,"id",{followed:!0}),friends:u(e.friends,t.userId,"id",{followed:!0})});case j:return Object(i.a)(Object(i.a)({},e),{},{users:u(e.users,t.userId,"id",{followed:!1}),friends:u(e.friends,t.userId,"id",{followed:!1})});case p:case g:case h:return Object(i.a)(Object(i.a)({},e),t.payload);case O:return Object(i.a)(Object(i.a)({},e),{},{isFetching:t.isFetching});case m:return Object(i.a)(Object(i.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(c.a)(e.followingInProgress),[t.userId]):[e.followingInProgress.filter((function(e){return e!==t.userId}))]});case v:return Object(i.a)(Object(i.a)({},e),{},{isFriends:t.isFriends});default:return e}}},257:function(e,t,n){},26:function(e,t,n){e.exports={user:"Users_user__1L9rY",avatar:"Users_avatar__245Zb",leftBlock:"Users_leftBlock__2mXjK",rightBlock:"Users_rightBlock__tpx-n",name:"Users_name__RYCWc",status:"Users_status__2hB2k",friendButton:"Users_friendButton__ehvkF",allUsersButton:"Users_allUsersButton__1doSI",showFriends:"Users_showFriends__21BCl"}},29:function(e,t,n){"use strict";n.d(t,"a",(function(){return E})),n.d(t,"f",(function(){return N})),n.d(t,"g",(function(){return I})),n.d(t,"d",(function(){return k})),n.d(t,"e",(function(){return C})),n.d(t,"c",(function(){return y})),n.d(t,"h",(function(){return U}));var r=n(40),a=n(6),s=n.n(a),c=n(11),i=n(31),o=n(3),u=n(36),l=n(14),d=n(13),f="profilePage/ADD-POST",b="profilePage/SET_USER_PROFILE",j="profilePage/SET_USER_STATUS",p="profilePage/TOGGLE_IS_FETCHING",g="profilePage/INITIALIZED_SUCCESS_PROFILE",h="profilePage/SAVE_PHOTO_SUCCESS",O="profilePage/TOGGLE_IS_FETCHING_STATUS",m="profilePage/TOGGLE_IS_FETCHING_PROFILE_INFO",v="profilePage/SET_USER_SUCCESS",_={posts:[],profile:null,user:{},isFetching:!1,isFetchingStatus:!1,isFetchingProfileInfo:!1,status:""},x=function(e,t,n,r){return{type:f,idUserPage:e,message:t,name:n,likesCount:r}},w=function(e){return{type:j,status:e}},P=function(e){return{type:p,isFetching:e}},S=function(e){return{type:O,isFetchingStatus:e}},F=function(e){return{type:m,isFetchingProfileInfo:e}},E=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return function(a){a(x(e,t,n,r))}},N=function(e){return function(){var t=Object(c.a)(s.a.mark((function t(n){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.b.savePhoto(e);case 3:0===(r=t.sent).data.resultCode&&n((a=r.data.data.photos,{type:h,photos:a})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(Object(d.c)(t.t0));case 10:case"end":return t.stop()}var a}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},I=function(e){return function(){var t=Object(c.a)(s.a.mark((function t(n,a){var c,i,f;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(F(!0)),c=a().auth.userId,t.next=5,l.b.saveProfile(e);case 5:if(0!==(i=t.sent).data.resultCode){t.next=11;break}return t.next=9,n(k(c));case 9:t.next=14;break;case 11:return f=i.data.messages.map((function(e){var t=e.match(/(?<=\()(.*?)(?=\))/)[0],n=t[0].toLowerCase()+t.slice(1),a=e.match(/(.*?)(?=\()/)[0];return Object(r.a)({},n,a)})).reduce((function(e,t){var n=Object.keys(t)[0];if(-1!==n.search("contacts")){var a=n.match(/(?<=>)(.*?)(?=$)/)[0],s=a[0].toLowerCase()+a.slice(1),c=Object.values(t)[0];return Object(o.a)(Object(o.a)({},e),{},{contacts:Object(o.a)(Object(o.a)({},e.contacts),{},Object(r.a)({},s,c))})}return Object.assign(e,t)}),{contacts:{}}),n(Object(u.a)("edit-profile",f)),t.abrupt("return",Promise.reject(i.data.messages[0]));case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),n(Object(d.c)(t.t0));case 19:n(F(!1));case 20:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(e,n){return t.apply(this,arguments)}}()},k=function(e){return function(){var t=Object(c.a)(s.a.mark((function t(n){var r,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(P(!0)),t.next=4,l.b.getStatus(e);case 4:return r=t.sent,n(w(r.data)),t.next=8,l.b.getProfile(e);case 8:return a=t.sent,n((s=a.data,{type:b,profile:s})),t.next=12,y(a.data.fullName)(n);case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),n(Object(d.c)(t.t0));case 17:n(P(!1));case 18:case"end":return t.stop()}var s}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}()},C=function(e){return function(){var t=Object(c.a)(s.a.mark((function t(n){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.b.getStatus(e);case 3:r=t.sent,n(w(r.data)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(Object(d.c)(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},y=function(e){return function(){var t=Object(c.a)(s.a.mark((function t(n){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.d.findUser(e);case 2:r=t.sent,n((a=r.data.items[0],{type:v,user:a}));case 4:case"end":return t.stop()}var a}),t)})));return function(e){return t.apply(this,arguments)}}()},U=function(e){return function(){var t=Object(c.a)(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(S(!0)),t.next=4,l.b.setStatus(e);case 4:0===t.sent.data.resultCode&&n(w(e)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n(Object(d.c)(t.t0));case 11:n(S(!1));case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(o.a)(Object(o.a)({},e),{},{posts:[{idUserPage:t.idUserPage,message:t.message,name:t.name,likesCount:t.likesCount,id:e.posts.length}].concat(Object(i.a)(e.posts))});case b:return Object(o.a)(Object(o.a)({},e),{},{profile:t.profile});case j:return Object(o.a)(Object(o.a)({},e),{},{status:t.status});case p:return Object(o.a)(Object(o.a)({},e),{},{isFetching:t.isFetching});case O:return Object(o.a)(Object(o.a)({},e),{},{isFetchingStatus:t.isFetchingStatus});case m:return Object(o.a)(Object(o.a)({},e),{},{isFetchingProfileInfo:t.isFetchingProfileInfo});case g:return Object(o.a)(Object(o.a)({},e),{},{initialized:!0});case h:return Object(o.a)(Object(o.a)({},e),{},{profile:Object(o.a)(Object(o.a)({},e.profile),{},{photos:t.photos})});case v:return Object(o.a)(Object(o.a)({},e),{},{user:t.user});default:return e}}},30:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return h}));var r=n(6),a=n.n(r),s=n(11),c=n(3),i=n(36),o=n(14),u=n(13),l="auth/SET_USER_DATA",d="auth/GET_CAPTCHA_URL_SUCCES",f={userId:null,email:null,login:null,isFetching:!1,isAuth:!1,captchaUrl:null},b=function(e,t,n,r){return{type:l,payload:{userId:e,email:t,login:n,isAuth:r}}},j=function(e){return{type:d,payload:{captchaUrl:e}}},p=function(){return function(){var e=Object(s.a)(a.a.mark((function e(t){var n,r,s,c,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.me();case 3:0===(n=e.sent).data.resultCode&&(r=n.data.data,s=r.id,c=r.email,i=r.login,t(b(s,c,i,!0))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t(Object(u.c)(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},g=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return function(){var c=Object(s.a)(a.a.mark((function s(c){var l,d;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,o.a.login(e,t,n,r);case 3:0===(l=a.sent).data.resultCode?c(p()):(10===l.data.resultCode&&c(O()),d=l.data.messages.length>0?l.data.messages[0]:"Some error",c(Object(i.a)("login",{_error:d}))),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),c(Object(u.c)(a.t0));case 10:case"end":return a.stop()}}),s,null,[[0,7]])})));return function(e){return c.apply(this,arguments)}}()},h=function(){return function(){var e=Object(s.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.logout();case 3:0===e.sent.data.resultCode&&t(b(null,null,null,!1)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t(Object(u.c)(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},O=function(){return function(){var e=Object(s.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.c.getCaptchaUrl();case 3:n=e.sent,r=n.data.url,t(j(r)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t(Object(u.c)(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:case d:return Object(c.a)(Object(c.a)({},e),t.payload);default:return e}}},301:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),s=n(72),c=n.n(s),i=(n(177),function(e){e&&e instanceof Function&&n.e(5).then(n.bind(null,309)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))}),o=n(15),u=n(30),l=n(112),d=n(29),f=n(25),b=n(41),j=n(138),p=n(136),g=n(13),h=Object(o.c)({profilePage:d.b,dialogsPage:l.b,usersPage:f.a,auth:u.a,form:p.a,app:g.a,pagination:b.a}),O=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.d,m=Object(o.e)(h,O(Object(o.a)(j.a)));window.store=m;var v=m,_=n(16),x=n(10),w=(n(257),n(141)),P=n.n(w),S=n(0),F=function(e){return Object(S.jsx)("div",{className:"".concat(P.a.news," ","block"),children:"News"})},E=n(142),N=n.n(E),I=function(e){return Object(S.jsx)("div",{className:"".concat(N.a.music," ","block"),children:"Music"})},k=n(143),C=n.n(k),y=function(e){return Object(S.jsx)("div",{className:"".concat(C.a.settings," ","block"),children:"Settings"})},U=n(26),T=n.n(U),L=n(53),A=n(62),M=n(124),B=function(e){var t=e.user;return Object(S.jsxs)("div",{className:"".concat(T.a.user," ","block"),children:[Object(S.jsxs)("div",{className:T.a.leftBlock,children:[Object(S.jsx)("div",{children:Object(S.jsx)(_.b,{to:"/profile/"+t.id,children:Object(S.jsx)("img",{className:T.a.avatar,src:null!=t.photos.small?t.photos.small:A.a,alt:"ava"})})}),Object(S.jsx)("div",{children:Object(S.jsx)(M.a,{user:t})})]}),Object(S.jsx)("div",{className:T.a.rightBlock,children:Object(S.jsxs)(_.b,{to:"/profile/"+t.id,children:[Object(S.jsx)("div",{className:T.a.name,children:t.name}),Object(S.jsx)("div",{className:T.a.status,children:t.status})]})})]},t.id)},G=n(49),R=n.n(G),D=function(e){var t=e.onShiftPagesLeft,n=e.onShiftPagesRight,r=e.onPageChanged,a=e.pages,s=e.currentPage,c=e.beginPage,i=e.endPage;return Object(S.jsxs)("div",{className:R.a.scrollPages,children:[Object(S.jsx)("button",{className:"".concat(R.a.numberPage),onClick:function(){t()},children:"< "}),a.map((function(e){return Object(S.jsxs)("span",{className:"".concat(s===e&&R.a.selectedPage," ").concat(R.a.numberPage),onClick:function(){r(e)},children:["  ",e]},e)})).slice(c,i),Object(S.jsx)("button",{className:"".concat(R.a.numberPage),onClick:function(){n()},children:" >"})]})},z=n(12),q=Object(z.b)((function(e){return{state:e.pagination}}),{setCurrentPage:b.b,shiftPages:b.d})((function(e){for(var t=e.nameOfElements,n=e.pageSize,r=e.requestFunction,a=e.setCurrentPage,s=e.shiftPages,c=e.state[t],i=c.beginPage,o=c.endPage,u=c.totalCount,l=c.currentPage,d=Math.ceil(u/n),f=function(e){r(e,n),a(t,e)},b=[],j=1;j<=d;j+=1)b.push(j);return Object(S.jsx)(D,{onShiftPagesLeft:function(){1!==l&&(f(l-1),0!==i&&s(t,i-1,o-1))},onShiftPagesRight:function(){l!==d&&(f(l+1),o!==d&&s(t,i+1,o+1))},onPageChanged:f,pages:b,currentPage:l,beginPage:i,endPage:o})})),H=function(e){var t=e.users,n=e.friends,r=e.onAllUsers,a=e.onShowFriends,s=e.isFetching,c=e.isFriends,i=e.requestUsers,o=e.requestFriends,u=function(e){return e.map((function(e){return Object(S.jsx)(B,{user:e},e.id)}))};return Object(S.jsxs)("div",{className:"block",children:[c?Object(S.jsx)(q,{nameOfElements:"friends",pageSize:4,requestFunction:o}):Object(S.jsx)(q,{nameOfElements:"users",pageSize:4,requestFunction:i}),s?Object(S.jsx)(L.a,{}):Object(S.jsxs)("div",{children:[u(c?n:t),Object(S.jsx)("div",{className:T.a.friendButton,children:c?Object(S.jsx)("button",{className:T.a.allUsersButton,onClick:r,children:"All Users"}):Object(S.jsx)("button",{className:T.a.showFriends,onClick:a,children:"Show Friends"})})]})]})},W=function(e){return e.usersPage.users},K=function(e){return e.usersPage.friends},Y=function(e){return e.usersPage.isFriends},X=function(e){return e.usersPage.isFetching},Z=Object(z.b)((function(e){return{users:W(e),friends:K(e),isFetching:X(e),isFriends:Y(e)}}),{requestUsers:f.e,requestFriends:f.c,toggleIsFriends:f.f})((function(e){var t=e.isFriends,n=e.users,a=e.friends,s=e.isFetching,c=e.requestUsers,i=e.requestFriends,o=e.toggleIsFriends;Object(r.useEffect)((function(){t?i(1,4):c(1,4)}),[t,i,c]);return Object(S.jsx)(H,{onAllUsers:function(){o(!1)},onShowFriends:function(){o(!0)},isFriends:t,users:n,friends:a,isFetching:s,requestUsers:c,requestFriends:i})})),J=n(77),V=n.n(J),Q=function(e){var t=e.isAuth,n=e.login,r=e.logout;return Object(S.jsxs)("header",{className:V.a.header,children:[Object(S.jsx)("img",{src:"https://cdn2.iconfinder.com/data/icons/social-flat-buttons-3/512/tripit-512.png",alt:"logo"}),Object(S.jsx)("div",{className:V.a.loginBlock,children:t?Object(S.jsxs)("div",{children:[n,Object(S.jsx)("button",{className:V.a.logout,onClick:r,children:"Logout"})]}):Object(S.jsx)(_.b,{to:"/login",children:"Login"})})]})},$=Object(z.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{logout:u.d})(Q),ee=n(97),te=n(135),ne=n(70),re=n(54),ae=n(76),se=n.n(ae),ce=n(78),ie=n.n(ce),oe=Object(te.a)({form:"login"})((function(e){var t=e.handleSubmit,n=e.error,r=e.captchaUrl;return Object(S.jsxs)("form",{className:ie.a.form,onSubmit:t,children:[Object(S.jsx)("div",{children:Object(S.jsx)(ee.a,{placeholder:"Email",name:"email",component:re.b,validate:[ne.b]})}),Object(S.jsx)("div",{children:Object(S.jsx)(ee.a,{placeholder:"Password",name:"password",component:re.b,type:"password",validate:[ne.b]})}),Object(S.jsxs)("div",{className:se.a.checkbox,children:[Object(S.jsx)("div",{children:Object(S.jsx)(ee.a,{type:"checkbox",name:"rememberMe",component:re.a})}),Object(S.jsx)("label",{htmlFor:"rememberMe",children:"remember me"})]}),r&&Object(S.jsx)("img",{src:r,alt:""}),r&&Object(S.jsx)(ee.a,{placeholder:"Symbols from image",name:"captcha",component:re.b,validate:[ne.b]}),n&&Object(S.jsx)("div",{children:Object(S.jsx)("div",{className:se.a.formSummeryError,children:n})}),Object(S.jsx)("button",{className:se.a.loginBtn,children:"Login"})]})})),ue=Object(z.b)((function(e){return{isAuth:e.auth.isAuth,userId:e.auth.userId,captchaUrl:e.auth.captchaUrl}}),{login:u.c,logout:u.d})((function(e){if(e.isAuth)return Object(S.jsx)(x.a,{to:"/profile/"+e.userId});return Object(S.jsxs)("div",{className:"block",children:[Object(S.jsxs)("div",{className:ie.a.form,children:[Object(S.jsx)("h1",{children:"Login"}),Object(S.jsx)(oe,{onSubmit:function(t){e.login(t.email,t.password,t.rememberMe,t.captcha)},captchaUrl:e.captchaUrl})]}),Object(S.jsxs)("div",{className:ie.a.test,children:[Object(S.jsx)("h3",{children:"\u0422\u0435\u0441\u0442\u043e\u0432\u044b\u0439 \u0430\u043a\u0430\u0443\u043d\u0442"}),Object(S.jsxs)("p",{children:["Email: ",Object(S.jsx)("strong",{children:"free@samuraijs.com"})]}),Object(S.jsxs)("p",{children:["Password: ",Object(S.jsx)("strong",{children:"free"})]})]})]})})),le=n(18),de=n.n(le),fe=function(e){var t=e.userId,n=e.getUserProfile;return Object(S.jsx)("nav",{className:"".concat(de.a.nav," ","block"),children:Object(S.jsxs)("div",{className:de.a.links,children:[Object(S.jsx)("div",{className:de.a.item,children:Object(S.jsx)(_.b,{to:t?"/profile/".concat(t):"/login",onClick:function(){return n(t)},activeClassName:de.a.active,children:"My profile"})}),Object(S.jsx)("div",{className:de.a.item,children:Object(S.jsx)(_.b,{to:"/dialogs",activeClassName:de.a.active,children:"Messages"})}),Object(S.jsx)("div",{className:de.a.item,children:Object(S.jsx)(_.b,{to:"/news",activeClassName:de.a.active,children:"News"})}),Object(S.jsx)("div",{className:de.a.item,children:Object(S.jsx)(_.b,{to:"/music",activeClassName:de.a.active,children:"Music"})}),Object(S.jsx)("div",{className:de.a.item,children:Object(S.jsx)(_.b,{to:"/settings",activeClassName:de.a.active,children:"Settings"})}),Object(S.jsx)("div",{className:de.a.item,children:Object(S.jsx)(_.b,{to:"/users",activeClassName:de.a.active,children:"Users"})})]})})},be=Object(z.b)((function(e){return{userId:e.auth.userId}}),{getUserProfile:d.d})(fe),je=n(61),pe=n.n(je),ge=function(e){var t=e.globalError,n=e.setGlobalError;return Object(S.jsxs)("div",{className:pe.a.errorBlock,children:[Object(S.jsx)("div",{className:pe.a.mainMessage,children:t.mainMessage}),Object(S.jsxs)("div",{className:pe.a.errorMessage,children:["(",t.errorMessage,")"]}),Object(S.jsx)("button",{className:pe.a.button,onClick:function(){n()},children:"\u041e\u043a"})]})},he=n(42),Oe=n.n(he),me=function(e){var t=e.friends,n=e.getUserProfile,r=t.map((function(e){return Object(S.jsx)(_.b,{to:"/profile/".concat(e.id),onClick:function(){return n(e.id)},children:Object(S.jsxs)("div",{className:Oe.a.sidebarFriend,children:[Object(S.jsx)("img",{className:Oe.a.avatar,src:e.photos.small||A.a,alt:"ava"}),Object(S.jsx)("div",{className:Oe.a.friendName,children:e.name})]})},e.id)}));return Object(S.jsxs)("div",{className:"".concat(Oe.a.sidebar," ","block"," ").concat(0===t.length?Oe.a.hidden:""),children:[Object(S.jsx)("div",{className:Oe.a.heading,children:"Friends"}),r]})},ve=Object(z.b)((function(e){return{sidebarFriends:e.usersPage.sidebarFriends,sidebarSize:e.usersPage.sidebarSize}}),{requestSidebarFriends:f.d,getUserProfile:d.d})((function(e){var t=e.sidebarSize,n=e.sidebarFriends,a=e.getUserProfile,s=e.requestSidebarFriends;return Object(r.useEffect)((function(){s(1,t)}),[n.length,s,t]),Object(S.jsx)(me,{friends:n,getUserProfile:a})})),_e=a.a.lazy((function(){return n.e(4).then(n.bind(null,310))})),xe=a.a.lazy((function(){return n.e(3).then(n.bind(null,311))})),we=Object(z.b)((function(e){return{initialized:e.app.initialized,globalError:e.app.globalError,friends:e.usersPage.friends}}),{initializeApp:g.b,setGlobalError:g.c})((function(e){var t=e.initialized,n=e.globalError,a=e.initializeApp,s=e.setGlobalError;return Object(r.useEffect)((function(){var e=function(e){s("\u041d\u0435\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430",e.reason)};return a(),window.addEventListener("unhandledrejection",e),window.removeEventListener("unhandledrejection",e)}),[a,s]),t?Object(S.jsxs)(_.a,{children:[Object(S.jsx)($,{}),Object(S.jsxs)("div",{className:"app-wrapper",children:[n.mainMessage&&Object(S.jsx)(ge,{globalError:n,setGlobalError:s}),Object(S.jsxs)("div",{children:[Object(S.jsx)(be,{}),Object(S.jsx)(ve,{})]}),Object(S.jsx)(r.Suspense,{fallback:Object(S.jsx)(L.a,{}),children:Object(S.jsxs)(x.d,{children:[Object(S.jsx)(x.a,{exact:!0,from:"/",to:"/profile"}),Object(S.jsx)(x.b,{path:"/dialogs",component:_e}),Object(S.jsx)(x.b,{path:"/profile/:userId?",component:xe}),Object(S.jsx)(x.b,{path:"/news",component:F}),Object(S.jsx)(x.b,{path:"/music",component:I}),Object(S.jsx)(x.b,{path:"/settings",component:y}),Object(S.jsx)(x.b,{path:"/users",component:Z}),Object(S.jsx)(x.b,{path:"/login",component:ue}),Object(S.jsx)(x.b,{path:"*",render:function(){return Object(S.jsx)("div",{className:"block",children:"404 - PAGE NOT FOUND"})}})]})})]})]}):Object(S.jsx)(L.a,{})}));c.a.render(Object(S.jsx)(z.a,{store:v,children:Object(S.jsx)(we,{})}),document.getElementById("root")),i()},41:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return d}));var r=n(40),a=n(3),s="pagination/SET_CURRENT_PAGE",c="pagination/SET_TOTAL_COUNT",i="pagination/SHIFT_PAGES",o={users:{beginPage:0,endPage:12,totalCount:0,currentPage:1},friends:{beginPage:0,endPage:12,totalCount:0,currentPage:1}},u=function(e,t){return{type:s,nameOfElements:e,payload:{currentPage:t}}},l=function(e,t){return{type:c,nameOfElements:e,payload:{totalCount:t}}},d=function(e,t,n){return{type:i,nameOfElements:e,payload:{beginPage:t,endPage:n}}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:case c:case i:return Object(a.a)(Object(a.a)({},e),{},Object(r.a)({},t.nameOfElements,Object(a.a)(Object(a.a)({},e[t.nameOfElements]),t.payload)));default:return e}}},42:function(e,t,n){e.exports={sidebar:"Sidebar_sidebar__37NVi",avatar:"Sidebar_avatar__niNtw",sidebarFriend:"Sidebar_sidebarFriend__2GBq2",friendName:"Sidebar_friendName__2ChZ2",heading:"Sidebar_heading__2-UmF",hidden:"Sidebar_hidden__1HBYl"}},48:function(e,t,n){e.exports={follow:"FollowUnfollowButton_follow__3lCoS",unfollow:"FollowUnfollowButton_unfollow__3bi9r",button:"FollowUnfollowButton_button__1dUTd",hidden:"FollowUnfollowButton_hidden__1pMuL"}},49:function(e,t,n){e.exports={scrollPages:"Pagination_scrollPages__2UahA",numberPage:"Pagination_numberPage__PLvK3",selectedPage:"Pagination_selectedPage__3FCs0"}},53:function(e,t,n){"use strict";var r=n(144),a=n.n(r),s=n(0);t.a=function(e){return Object(s.jsxs)("div",{className:a.a.lds_roller+" "+e.className,children:[Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{})]})}},54:function(e,t,n){"use strict";n.d(t,"d",(function(){return p})),n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return O})),n.d(t,"e",(function(){return m}));var r=n(3),a=n(147),s=(n(1),n(97)),c=n(145),i=n.n(c),o=n(100),u=n.n(o),l=n(146),d=n.n(l),f=n(0),b=["input","meta"],j=function(e,t){return function(n){var s=n.input,c=n.meta,i=c.touched,o=c.error,u=Object(a.a)(n,b),l=i&&o;return Object(f.jsxs)("div",{className:t.block,children:[Object(f.jsx)(e,Object(r.a)(Object(r.a)(Object(r.a)({},s),u),{},{className:t.field+" "+(l?t.errorField:"")})),l&&Object(f.jsx)("div",{className:t.error,children:o})]})}},p=j("textarea",i.a),g=j("input",u.a),h=j("input",d.a),O=j("input",u.a),m=function(e,t,n,a){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return Object(f.jsx)(s.a,Object(r.a)({placeholder:e,name:t,validate:n,component:a},c))}},61:function(e,t,n){e.exports={errorBlock:"ErrorMessage_errorBlock__3_pNj",button:"ErrorMessage_button__1KcLA",mainMessage:"ErrorMessage_mainMessage__1Fq-L",errorMessage:"ErrorMessage_errorMessage__2IH_k"}},62:function(e,t,n){"use strict";t.a=n.p+"static/media/1.e36dde25.png"},70:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var r=function(e){if(!e)return"Field is required"},a=function(e){return function(t){if(t.length>e)return"Max length is ".concat(e," symbols")}}},76:function(e,t,n){e.exports={formControl:"FormsControls_formControl__2OAWu",error:"FormsControls_error__CJKw9",formSummeryError:"FormsControls_formSummeryError__3xO10",checkbox:"FormsControls_checkbox__beWy1",loginBtn:"FormsControls_loginBtn__1jXYH"}},77:function(e,t,n){e.exports={header:"Header_header__2jC4j",loginBlock:"Header_loginBlock__18G30",logout:"Header_logout__1gBgl"}},78:function(e,t,n){e.exports={form:"Login_form__1mEHP",test:"Login_test__sNFCp"}}},[[301,1,2]]]);
//# sourceMappingURL=main.20ba376e.chunk.js.map