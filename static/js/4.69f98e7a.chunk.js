(this["webpackJsonpreact-1"]=this["webpackJsonpreact-1"]||[]).push([[4],{302:function(e,t,s){e.exports={dialogs:"Dialogs_dialogs__2UnvQ",dialog_items:"Dialogs_dialog_items__otVHL",dialog:"Dialogs_dialog__3kSWu",friendName:"Dialogs_friendName__1FGAl",messagesElements:"Dialogs_messagesElements__1L7yM",messagesNone:"Dialogs_messagesNone__3wb3K",active:"Dialogs_active__1Ra0v",messages:"Dialogs_messages__10WQv",message_mine:"Dialogs_message_mine__1RIjr",message_foreign:"Dialogs_message_foreign__9ACDq",dialogsHidden:"Dialogs_dialogsHidden__2HWJn",form:"Dialogs_form__OrKNZ",sendButton:"Dialogs_sendButton__2LsXB",showMoreButton:"Dialogs_showMoreButton__2bp14",sidebarFriend:"Dialogs_sidebarFriend__1b1Hn"}},309:function(e,t,s){"use strict";s.r(t);var n=s(111),a=s(13),o=s(102),r=s(302),i=s.n(r),c=s(16),l=s(61),d=s(0),u=function(e){var t=e.id,s=e.avatar,n=e.name,a=e.setSelectedUserId;return Object(d.jsx)("div",{className:"".concat(i.a.dialog),children:Object(d.jsx)(c.b,{activeClassName:i.a.active,to:"/dialogs/".concat(t),onClick:function(){a(t)},children:Object(d.jsxs)("div",{className:i.a.sidebarFriend,children:[Object(d.jsx)("img",{className:i.a.avatar,src:s||l.a,alt:"ava"}),Object(d.jsx)("div",{className:i.a.friendName,children:n})]})})})},f=function(e){var t=e.message;return Object(d.jsx)("div",{className:i.a.message_mine,children:Object(d.jsx)("span",{children:t})})},g=s(11),b=s(96),m=s(134),j=s(52),_=s(69),p=s(1),h=s.n(p),O=function(e){var t=e.dialogs,s=e.isAuth,n=e.sendMessage,a=e.friends,r=e.requestFriends,c=e.addNextFriendsPage,l=e.selectedUserId,h=e.setSelectedUserId,O=e.totalCountFriends,v=e.pageSize,y=e.pageFriends,x=e.setPageFriends,N=Object(p.useState)(!0),S=Object(o.a)(N,2),w=S[0],D=S[1],F=Object(p.useRef)(null),P=Math.ceil(O/v);Object(p.useEffect)((function(){r(1,(y-1)*v)}),[v,r]);var I=a.map((function(e){return Object(d.jsx)(u,{name:e.name,id:e.id,avatar:e.photos.small,setSelectedUserId:h},e.id)}));Object(p.useEffect)((function(){0===a.length?D(!0):D(!1)}),[a.length]);var M=t.find((function(e){return e.userId===l})),k=M?M.messages.map((function(e){return Object(d.jsx)(f,{message:e.message},e.id)})):[];if(Object(p.useEffect)((function(){F.current.scrollIntoView()}),[k.length]),!s)return Object(d.jsx)(g.a,{to:"/login"});var A=Object(_.a)(100),B=Object(m.a)({form:"dialogAddMessageForm"})((function(e){var t=e.handleSubmit;return Object(d.jsxs)("form",{className:i.a.form,onSubmit:t,children:[Object(d.jsx)(b.a,{className:i.a.textarea,name:"newMessageBody",component:j.d,validate:[_.b,A]}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{className:i.a.sendButton,children:"Send"})})]})}));return Object(d.jsxs)("div",{className:w?i.a.dialogsHidden:i.a.dialogs,children:[l&&Object(d.jsx)(g.a,{to:"/dialogs/".concat(l)}),Object(d.jsx)("div",{children:Object(d.jsxs)("div",{className:"".concat(i.a.dialog_items," ","block"),children:[I,P>=y&&Object(d.jsx)("button",{className:i.a.showMoreButton,onClick:function(){c(y,v),x(y+1)},children:"Show more friends"})]})}),Object(d.jsx)("div",{children:Object(d.jsxs)("div",{className:l?"".concat(i.a.messages," ","block"):i.a.messagesNone,children:[Object(d.jsxs)("div",{className:i.a.messagesElements,children:[k,Object(d.jsx)("div",{ref:F,style:{float:"left",clear:"both"}})]}),Object(d.jsx)(B,{onSubmit:function(e){n(l,e.newMessageBody)}})]})})]})},v=s(2);function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e){return(w="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){return!t||"object"!==w(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function F(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,n=S(e);if(t){var a=S(this).constructor;s=Reflect.construct(n,arguments,a)}else s=n.apply(this,arguments);return D(this,s)}}var P=function(e){return{isAuth:e.auth.isAuth}},I=s(15);t.default=Object(I.d)(Object(a.b)((function(e){return{dialogs:e.dialogsPage.dialogs,friends:e.dialogsPage.friends,selectedUserId:e.dialogsPage.selectedUserId,totalCountFriends:e.dialogsPage.totalCountFriends,pageSize:e.dialogsPage.pageSize,pageFriends:e.dialogsPage.pageFriends,isAuth:e.auth.isAuth}}),{sendMessage:n.d,requestFriends:n.c,addNextFriendsPage:n.a,setSelectedUserId:n.f,setPageFriends:n.e}),(function(e){var t=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(r,t);var s,n,a,o=F(r);function r(){return y(this,r),o.apply(this,arguments)}return s=r,(n=[{key:"render",value:function(){return this.props.isAuth?Object(d.jsx)(e,Object(v.a)({},this.props)):Object(d.jsx)(g.a,{to:"/login"})}}])&&x(s.prototype,n),a&&x(s,a),r}(h.a.Component);return Object(a.b)(P)(t)}))(O)}}]);
//# sourceMappingURL=4.69f98e7a.chunk.js.map