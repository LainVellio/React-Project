(this["webpackJsonpreact-1"]=this["webpackJsonpreact-1"]||[]).push([[0],{10:function(e,t,n){"use strict";n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return f}));var r=n(2),a=n(30),s="INITIALIZED_SUCCESS",c="SET_GLOBAL_ERROR_SUCCESS",i="SET_IS_SIDEBAR_HIDDEN",o={initialized:!1,globalError:{mainMessage:"",errorMessage:""},isSidebarHidden:!0},u=function(e,t){return{type:c,mainMessage:e,errorMessage:t}},l=function(e){return{type:i,isSidebarHidden:e}},d=function(){return function(e){var t=e(Object(a.b)());Promise.all([t]).then((function(){return e({type:s})}))}},f=function(e){return function(t){t(e?u(function(e){switch(e){case 400:return"\u041a\u043e\u0434 400 - \u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441";case 403:return"\u041a\u043e\u0434 403 - \u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u0430";case 500:return"\u041a\u043e\u0434 500 - \u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430";default:return"\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430"}}(e.response.status),e.message):u("",""))}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:return Object(r.a)(Object(r.a)({},e),{},{initialized:!0});case c:return Object(r.a)(Object(r.a)({},e),{},{globalError:{mainMessage:t.mainMessage,errorMessage:t.errorMessage}});case i:return Object(r.a)(Object(r.a)({},e),{},{isSidebarHidden:t.isSidebarHidden});default:return e}}},111:function(e,t,n){"use strict";n.d(t,"d",(function(){return h})),n.d(t,"f",(function(){return O})),n.d(t,"e",(function(){return v})),n.d(t,"c",(function(){return _})),n.d(t,"a",(function(){return x}));var r=n(7),a=n.n(r),s=n(14),c=n(31),i=n(2),o=n(12),u=n(10),l="dialogs/SEND-MESSAGE",d="dialogs/SET_SELECTED_USER_ID",f="dialogs/SET_FRIENDS",b="dialogs/ADD_NEXT_FRIENDS_PAGE_CREATOR",j="dialogs/SET_TOTAL_COUNT_FRIENDS",g="dialogs/SET_PAGE_FRIENDS",p={dialogs:[],friends:[],selectedUserId:null,totalCountFriends:0,pageSize:5,pageFriends:2},h=function(e,t){return{type:l,userId:e,message:t}},O=function(e){return{type:d,selectedUserId:e}},m=function(e){return{type:f,friends:e}},v=function(e){return{type:g,pageFriends:e}},_=function(e,t){return function(){var n=Object(s.a)(a.a.mark((function n(r){var s,c;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,o.d.getUsers(e,t,!0);case 3:s=n.sent,c=s.data.items,r(m(c)),r((a=s.data.totalCount,{type:j,totalCountFriends:a})),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),r(Object(u.c)(n.t0));case 12:case"end":return n.stop()}var a}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()},x=function(e,t){return function(){var n=Object(s.a)(a.a.mark((function n(r){var s;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,o.d.getUsers(e,t,!0);case 3:s=n.sent,r((a=s.data.items,{type:b,friends:a})),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),r(Object(u.c)(n.t0));case 10:case"end":return n.stop()}var a}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(i.a)(Object(i.a)({},e),{},{dialogs:e.dialogs.find((function(e){return e.userId===t.userId}))?e.dialogs.map((function(e){return e.userId===t.userId?{userId:e.userId,messages:[].concat(Object(c.a)(e.messages),[{id:e.messages.length,message:t.message}])}:e})):[].concat(Object(c.a)(e.dialogs),[{userId:t.userId,messages:[{id:0,message:t.message}]}])});case d:return Object(i.a)(Object(i.a)({},e),{},{selectedUserId:t.selectedUserId});case f:return Object(i.a)(Object(i.a)({},e),{},{friends:t.friends});case b:return Object(i.a)(Object(i.a)({},e),{},{friends:[].concat(Object(c.a)(e.friends),Object(c.a)(t.friends))});case j:return Object(i.a)(Object(i.a)({},e),{},{totalCountFriends:t.totalCountFriends});case g:return Object(i.a)(Object(i.a)({},e),{},{pageFriends:t.pageFriends});default:return e}}},12:function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o}));var r=n(136),a=n.n(r).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"4695d1e8-8e53-40ac-9b0b-d9e9d8e53801"}}),s={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"false";return a.get("users?page=".concat(e,"&count=").concat(t,"&friend=").concat(n))},findUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return a.get("users?term=".concat(e))},follow:function(e){return a.post("follow/".concat(e),{})},unfollow:function(e){return a.delete("follow/".concat(e))}},c={me:function(){return a.get("auth/me")},login:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;return a.post("auth/login",{email:e,password:t,rememberMe:n,captcha:r})},logout:function(){return a.delete("auth/login")}},i={getProfile:function(e){return a.get("profile/".concat(e))},getStatus:function(e){return a.get("profile/status/".concat(e))},setStatus:function(e){return a.put("profile/status",{status:e})},savePhoto:function(e){var t=new FormData;return t.append("image",e),a.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}})},saveProfile:function(e){return a.put("profile",e)}},o={getCaptchaUrl:function(){return a.get("security/get-captcha-url")}}},123:function(e,t,n){"use strict";var r=n(102),a=n(1),s=n(13),c=n(18),i=n(47),o=n.n(i),u=n(0);t.a=Object(s.b)((function(e){return{followingInProgress:e.usersPage.followingInProgress,isAuth:e.auth.isAuth}}),{unfollow:c.j,follow:c.b})((function(e){var t=e.user,n=e.followingInProgress,s=e.follow,c=e.unfollow,i=e.isAuth,l=Object(a.useState)(!0),d=Object(r.a)(l,2),f=d[0],b=d[1];return Object(a.useEffect)((function(){b(!i)}),[i]),Object(u.jsx)("div",{className:f?o.a.hidden:"",children:t.followed?Object(u.jsx)("button",{disabled:n.some((function(e){return e===t.id})),className:"".concat(o.a.button," ").concat(o.a.follow),onClick:function(){c(t.id)},children:"Follow"}):Object(u.jsx)("button",{disabled:n.some((function(e){return e===t.id})),className:"".concat(o.a.button," ").concat(o.a.unfollow),onClick:function(){s(t.id)},children:"UnFollow"})})}))},140:function(e,t,n){e.exports={news:"News_news__3b_Ht"}},141:function(e,t,n){e.exports={music:"Music_music__2ozzY"}},142:function(e,t,n){e.exports={settings:"Settings_settings__1O3ZQ"}},143:function(e,t,n){e.exports={lds_roller:"Preloader_lds_roller__36ydK"}},144:function(e,t,n){e.exports={block:"Textarea_block__2WNfY",field:"Textarea_field__1f5kU",errorField:"Textarea_errorField__3wnOd",error:"Textarea_error__1Ox-_"}},145:function(e,t,n){},176:function(e,t,n){},18:function(e,t,n){"use strict";n.d(t,"e",(function(){return N})),n.d(t,"f",(function(){return I})),n.d(t,"g",(function(){return U})),n.d(t,"h",(function(){return y})),n.d(t,"i",(function(){return T})),n.d(t,"d",(function(){return L})),n.d(t,"c",(function(){return A})),n.d(t,"b",(function(){return M})),n.d(t,"j",(function(){return G}));var r=n(7),a=n.n(r),s=n(14),c=n(31),i=n(2),o=n(12),u=function(e,t,n,r){return e.map((function(e){return e[n]===t?Object(i.a)(Object(i.a)({},e),r):e}))},l=n(10),d=n(29),f="users/FOLLOW",b="users/UNFOLLOW",j="users/SET_USERS",g="users/SET_CURRENT_PAGE",p="users/SET_TOTAL_COUNT",h="users/TOGGLE_IS_FETCHING",O="users/TOGGLE_IS_FOLLOWING_PROGRESS",m="users/SHIFT_PAGES_LEFT",v="users/SHIFT_PAGES_RIGHT",_="users/TOGGLE_IS_FRIENDS",x="users/SET_FRIENDS",P="users/SET_CURRENT_PAGE_FRIENDS",S={users:[],friends:[],pageSize:4,totalUsersCount:0,currentPage:1,currentPageFriends:1,beginPage:0,endPage:12,isFetching:!1,isFriends:!1,followingInProgress:[],sidebarSize:5},F=function(e){return{type:b,userId:e}},w=function(e){return{type:f,userId:e}},E=function(e){return{type:x,friends:e}},N=function(e){return{type:g,currentPage:e}},I=function(e){return{type:P,currentPageFriends:e}},C=function(e){return{type:h,isFetching:e}},k=function(e,t){return{type:O,isFetching:e,userId:t}},U=function(e,t){return{type:m,beginPage:e,endPage:t}},y=function(e,t){return{type:v,beginPage:e,endPage:t}},T=function(e){return{type:_,isFriends:e}},L=function(e,t,n){return function(){var r=Object(s.a)(a.a.mark((function r(s){var c;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,s(C(!0)),r.next=4,o.d.getUsers(e,t,n);case 4:c=r.sent,s((i=c.data.items,{type:j,users:i})),s((a=c.data.totalCount,{type:p,totalUsersCount:a})),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),s(Object(l.c)(r.t0));case 12:s(C(!1));case 13:case"end":return r.stop()}var a,i}),r,null,[[0,9]])})));return function(e){return r.apply(this,arguments)}}()},A=function(e,t){return function(){var n=Object(s.a)(a.a.mark((function n(r){var s,c;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("request friends"),n.next=4,o.d.getUsers(e,t,!0);case 4:s=n.sent,c=s.data.items,r(E(c)),0===c.length&&r(Object(l.d)(!0)),console.log("request friends end"),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),r(Object(l.c)(n.t0));case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e){return n.apply(this,arguments)}}()},R=function(){var e=Object(s.a)(a.a.mark((function e(t,n,r,s,c,i,o){var u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(k(!0,n)),e.next=4,r(n);case 4:if(u=e.sent,console.log(i()),0!==u.data.resultCode){e.next=11;break}return t(s(n)),c(t),e.next=11,o(i().profilePage.profile.fullName)(t);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),t(Object(l.c)(e.t0));case 16:t(k(!1,n));case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n,r,a,s,c,i){return e.apply(this,arguments)}}(),M=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n,r){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:R(n,e,o.d.follow.bind(o.d),w,A(1,5),r,d.c);case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},G=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n,r){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:R(n,e,o.d.unfollow.bind(o.d),F,A(1,5),r,d.c);case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(i.a)(Object(i.a)({},e),{},{users:u(e.users,t.userId,"id",{followed:!0})});case b:return Object(i.a)(Object(i.a)({},e),{},{users:u(e.users,t.userId,"id",{followed:!1})});case j:return Object(i.a)(Object(i.a)({},e),{},{users:t.users});case x:return Object(i.a)(Object(i.a)({},e),{},{friends:t.friends});case g:return Object(i.a)(Object(i.a)({},e),{},{currentPage:t.currentPage});case P:return Object(i.a)(Object(i.a)({},e),{},{currentPageFriends:t.currentPageFriends});case p:return Object(i.a)(Object(i.a)({},e),{},{totalUsersCount:t.totalUsersCount});case h:return Object(i.a)(Object(i.a)({},e),{},{isFetching:t.isFetching});case O:return Object(i.a)(Object(i.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(c.a)(e.followingInProgress),[t.userId]):[e.followingInProgress.filter((function(e){return e!==t.userId}))]});case m:case v:return Object(i.a)(Object(i.a)({},e),{},{beginPage:t.beginPage,endPage:t.endPage});case _:return Object(i.a)(Object(i.a)({},e),{},{isFriends:t.isFriends});default:return e}}},19:function(e,t,n){e.exports={nav:"Navbar_nav__3tJyT",links:"Navbar_links__20KC5",item:"Navbar_item__1Uyvu",active:"Navbar_active__leOmI"}},256:function(e,t,n){},26:function(e,t,n){e.exports={user:"Users_user__1L9rY",avatar:"Users_avatar__245Zb",leftBlock:"Users_leftBlock__2mXjK",rightBlock:"Users_rightBlock__tpx-n",name:"Users_name__RYCWc",status:"Users_status__2hB2k",friendButton:"Users_friendButton__ehvkF",allUsersButton:"Users_allUsersButton__1doSI",showFriends:"Users_showFriends__21BCl"}},29:function(e,t,n){"use strict";n.d(t,"a",(function(){return E})),n.d(t,"f",(function(){return N})),n.d(t,"g",(function(){return I})),n.d(t,"d",(function(){return C})),n.d(t,"e",(function(){return k})),n.d(t,"c",(function(){return U})),n.d(t,"h",(function(){return y}));var r=n(56),a=n(7),s=n.n(a),c=n(14),i=n(31),o=n(2),u=n(36),l=n(12),d=n(10),f="profilePage/ADD-POST",b="profilePage/SET_USER_PROFILE",j="profilePage/SET_USER_STATUS",g="profilePage/TOGGLE_IS_FETCHING",p="profilePage/INITIALIZED_SUCCESS_PROFILE",h="profilePage/SAVE_PHOTO_SUCCESS",O="profilePage/TOGGLE_IS_FETCHING_STATUS",m="profilePage/TOGGLE_IS_FETCHING_PROFILE_INFO",v="profilePage/SET_USER_SUCCESS",_={posts:[],profile:null,user:{},isFetching:!1,isFetchingStatus:!1,isFetchingProfileInfo:!1,status:""},x=function(e,t,n,r){return{type:f,idUserPage:e,message:t,name:n,likesCount:r}},P=function(e){return{type:j,status:e}},S=function(e){return{type:g,isFetching:e}},F=function(e){return{type:O,isFetchingStatus:e}},w=function(e){return{type:m,isFetchingProfileInfo:e}},E=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return function(a){a(x(e,t,n,r))}},N=function(e){return function(){var t=Object(c.a)(s.a.mark((function t(n){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.b.savePhoto(e);case 3:0===(r=t.sent).data.resultCode&&n((a=r.data.data.photos,{type:h,photos:a})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(Object(d.c)(t.t0));case 10:case"end":return t.stop()}var a}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},I=function(e){return function(){var t=Object(c.a)(s.a.mark((function t(n,a){var c,i,f;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(w(!0)),c=a().auth.userId,t.next=5,l.b.saveProfile(e);case 5:if(0!==(i=t.sent).data.resultCode){t.next=11;break}return t.next=9,n(C(c));case 9:t.next=14;break;case 11:return f=i.data.messages.map((function(e){var t=e.match(/(?<=\()(.*?)(?=\))/)[0],n=t[0].toLowerCase()+t.slice(1),a=e.match(/(.*?)(?=\()/)[0];return Object(r.a)({},n,a)})).reduce((function(e,t){var n=Object.keys(t)[0];if(-1!==n.search("contacts")){var a=n.match(/(?<=>)(.*?)(?=$)/)[0],s=a[0].toLowerCase()+a.slice(1),c=Object.values(t)[0];return Object(o.a)(Object(o.a)({},e),{},{contacts:Object(o.a)(Object(o.a)({},e.contacts),{},Object(r.a)({},s,c))})}return Object.assign(e,t)}),{contacts:{}}),n(Object(u.a)("edit-profile",f)),t.abrupt("return",Promise.reject(i.data.messages[0]));case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),n(Object(d.c)(t.t0));case 19:n(w(!1));case 20:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(e,n){return t.apply(this,arguments)}}()},C=function(e){return function(){var t=Object(c.a)(s.a.mark((function t(n){var r,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(S(!0)),t.next=4,l.b.getProfile(e);case 4:return r=t.sent,n((s=r.data,{type:b,profile:s})),t.next=8,l.b.getStatus(e);case 8:return a=t.sent,n(P(a.data)),t.next=12,U(r.data.fullName)(n);case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),n(Object(d.c)(t.t0));case 17:n(S(!1));case 18:case"end":return t.stop()}var s}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}()},k=function(e){return function(){var t=Object(c.a)(s.a.mark((function t(n){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.b.getStatus(e);case 3:r=t.sent,n(P(r.data)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(Object(d.c)(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},U=function(e){return function(){var t=Object(c.a)(s.a.mark((function t(n){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.d.findUser(e);case 2:r=t.sent,n((a=r.data.items[0],{type:v,user:a}));case 4:case"end":return t.stop()}var a}),t)})));return function(e){return t.apply(this,arguments)}}()},y=function(e){return function(){var t=Object(c.a)(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(F(!0)),t.next=4,l.b.setStatus(e);case 4:0===t.sent.data.resultCode&&n(P(e)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n(Object(d.c)(t.t0));case 11:n(F(!1));case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(o.a)(Object(o.a)({},e),{},{posts:[{idUserPage:t.idUserPage,message:t.message,name:t.name,likesCount:t.likesCount,id:e.posts.length}].concat(Object(i.a)(e.posts))});case b:return Object(o.a)(Object(o.a)({},e),{},{profile:t.profile});case j:return Object(o.a)(Object(o.a)({},e),{},{status:t.status});case g:return Object(o.a)(Object(o.a)({},e),{},{isFetching:t.isFetching});case O:return Object(o.a)(Object(o.a)({},e),{},{isFetchingStatus:t.isFetchingStatus});case m:return Object(o.a)(Object(o.a)({},e),{},{isFetchingProfileInfo:t.isFetchingProfileInfo});case p:return Object(o.a)(Object(o.a)({},e),{},{initialized:!0});case h:return Object(o.a)(Object(o.a)({},e),{},{profile:Object(o.a)(Object(o.a)({},e.profile),{},{photos:t.photos})});case v:return Object(o.a)(Object(o.a)({},e),{},{user:t.user});default:return e}}},30:function(e,t,n){"use strict";n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return h}));var r=n(7),a=n.n(r),s=n(14),c=n(2),i=n(36),o=n(12),u=n(10),l="auth/SET_USER_DATA",d="auth/GET_CAPTCHA_URL_SUCCES",f={userId:null,email:null,login:null,isFetching:!1,isAuth:!1,captchaUrl:null},b=function(e,t,n,r){return{type:l,payload:{userId:e,email:t,login:n,isAuth:r}}},j=function(e){return{type:d,payload:{captchaUrl:e}}},g=function(){return function(){var e=Object(s.a)(a.a.mark((function e(t){var n,r,s,c,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.me();case 3:0===(n=e.sent).data.resultCode&&(r=n.data.data,s=r.id,c=r.email,i=r.login,t(b(s,c,i,!0))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t(Object(u.c)(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},p=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return function(){var c=Object(s.a)(a.a.mark((function s(c){var l,d;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,o.a.login(e,t,n,r);case 3:0===(l=a.sent).data.resultCode?c(g()):(10===l.data.resultCode&&c(O()),d=l.data.messages.length>0?l.data.messages[0]:"Some error",c(Object(i.a)("login",{_error:d}))),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),c(Object(u.c)(a.t0));case 10:case"end":return a.stop()}}),s,null,[[0,7]])})));return function(e){return c.apply(this,arguments)}}()},h=function(){return function(){var e=Object(s.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.logout();case 3:0===e.sent.data.resultCode&&t(b(null,null,null,!1)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t(Object(u.c)(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},O=function(){return function(){var e=Object(s.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.c.getCaptchaUrl();case 3:n=e.sent,r=n.data.url,t(j(r)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t(Object(u.c)(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:case d:return Object(c.a)(Object(c.a)({},e),t.payload);default:return e}}},300:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),s=n(71),c=n.n(s),i=(n(176),function(e){e&&e instanceof Function&&n.e(5).then(n.bind(null,308)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))}),o=n(15),u=n(30),l=n(111),d=n(29),f=n(18),b=n(137),j=n(135),g=n(10),p=Object(o.c)({profilePage:d.b,dialogsPage:l.b,usersPage:f.a,auth:u.a,form:j.a,app:g.a}),h=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.d,O=Object(o.e)(p,h(Object(o.a)(b.a)));window.store=O;var m=O,v=n(16),_=n(11),x=(n(256),n(140)),P=n.n(x),S=n(0),F=function(e){return Object(S.jsx)("div",{className:"".concat(P.a.news," ","block"),children:"News"})},w=n(141),E=n.n(w),N=function(e){return Object(S.jsx)("div",{className:"".concat(E.a.music," ","block"),children:"Music"})},I=n(142),C=n.n(I),k=function(e){return Object(S.jsx)("div",{className:"".concat(C.a.settings," ","block"),children:"Settings"})},U=n(26),y=n.n(U),T=n(51),L=n(40),A=n.n(L),R=function(e){var t=e.onShiftPagesLeft,n=e.onShiftPagesRight,r=e.onPageChanged,a=e.pages,s=e.isFriends,c=e.currentPageFriends,i=e.currentPage,o=e.beginPage,u=e.endPage;return Object(S.jsxs)("div",{className:A.a.scrollPages,children:[Object(S.jsx)("button",{className:"".concat(A.a.numberPage),onClick:function(){t()},children:"< "}),a.map((function(e){return Object(S.jsxs)("span",{className:"".concat(s?c===e&&A.a.selectedPage:i===e&&A.a.selectedPage," ").concat(A.a.numberPage),onClick:function(){r(e)},children:["  ",e]},e)})).slice(o,u),Object(S.jsx)("button",{className:"".concat(A.a.numberPage),onClick:function(){n()},children:" >"})]})},M=n(13),G=function(e){return e.usersPage.users},B=function(e){return e.usersPage.pageSize},H=function(e){return e.usersPage.totalUsersCount},D=function(e){return e.usersPage.currentPage},z=function(e){return e.usersPage.isFriends},q=function(e){return e.usersPage.currentPageFriends},W=function(e){return e.usersPage.isFetching},Y=function(e){return e.usersPage.followingInProgress},K=function(e){return e.usersPage.beginPage},Z=function(e){return e.usersPage.endPage},J=Object(M.b)((function(e){return{totalUsersCount:H(e),pageSize:B(e),currentPage:D(e),isFriends:z(e),isFetching:W(e),beginPage:K(e),endPage:Z(e),followingInProgress:Y(e),currentPageFriends:q(e)}}),{requestUsers:f.d,setCurrentPage:f.e,setCurrentPageFriends:f.f,shiftPagesLeft:f.g,shiftPagesRight:f.h})((function(e){for(var t=e.totalUsersCount,n=e.pageSize,r=e.currentPage,a=e.isFriends,s=e.beginPage,c=e.endPage,i=e.currentPageFriends,o=e.requestUsers,u=e.setCurrentPage,l=e.setCurrentPageFriends,d=e.shiftPagesLeft,f=e.shiftPagesRight,b=Math.ceil(t/n),j=function(e){o(e,n,a),a?l(e):u(e)},g=[],p=1;p<=b;p+=1)g.push(p);return Object(S.jsx)(R,{onShiftPagesLeft:function(){1!==r&&(j(r-1),0!==s&&d(s-1,c-1))},onShiftPagesRight:function(){var e=Math.ceil(t/n);r!==e&&(j(r+1),c!==e&&f(s+1,c+1))},onPageChanged:j,pages:g,isFriends:a,currentPageFriends:i,currentPage:r,beginPage:s,endPage:c})})),X=n(61),V=n(123),Q=function(e){var t=e.user;return Object(S.jsxs)("div",{className:"".concat(y.a.user," ","block"),children:[Object(S.jsxs)("div",{className:y.a.leftBlock,children:[Object(S.jsx)("div",{children:Object(S.jsx)(v.b,{to:"/profile/"+t.id,children:Object(S.jsx)("img",{className:y.a.avatar,src:null!=t.photos.small?t.photos.small:X.a,alt:"ava"})})}),Object(S.jsx)("div",{children:Object(S.jsx)(V.a,{user:t})})]}),Object(S.jsx)("div",{className:y.a.rightBlock,children:Object(S.jsxs)(v.b,{to:"/profile/"+t.id,children:[Object(S.jsx)("div",{className:y.a.name,children:t.name}),Object(S.jsx)("div",{className:y.a.status,children:t.status})]})})]},t.id)},$=function(e){var t=e.users,n=e.onAllUsers,r=e.onShowFriends,a=e.isFetching,s=e.isFriends;return Object(S.jsxs)("div",{className:"block",children:[Object(S.jsx)(J,{}),a?Object(S.jsx)(T.a,{}):Object(S.jsxs)("div",{children:[t.map((function(e){return Object(S.jsx)(Q,{user:e},e.id)})),Object(S.jsx)("div",{className:y.a.friendButton,children:s?Object(S.jsx)("button",{className:y.a.allUsersButton,onClick:n,children:"All Users"}):Object(S.jsx)("button",{className:y.a.showFriends,onClick:r,children:"Show Friends"})})]})]})},ee=Object(M.b)((function(e){return{users:G(e),isFetching:W(e),isFriends:z(e),currentPageFriends:q(e),currentPage:D(e),pageSize:B(e)}}),{requestUsers:f.d,toggleIsFriends:f.i})((function(e){var t=e.isFriends,n=e.currentPageFriends,a=e.currentPage,s=e.pageSize,c=e.users,i=e.isFetching,o=e.requestUsers,u=e.toggleIsFriends;Object(r.useEffect)((function(){o(t?n:a,s,t)}),[a,n,t,s,o]);return Object(S.jsx)($,{onAllUsers:function(){u(!1)},onShowFriends:function(){u(!0)},isFriends:t,users:c,isFetching:i})})),te=n(76),ne=n.n(te),re=function(e){var t=e.isAuth,n=e.login,r=e.logout;return Object(S.jsxs)("header",{className:ne.a.header,children:[Object(S.jsx)("img",{src:"https://cdn2.iconfinder.com/data/icons/social-flat-buttons-3/512/tripit-512.png",alt:"logo"}),Object(S.jsx)("div",{className:ne.a.loginBlock,children:t?Object(S.jsxs)("div",{children:[n,Object(S.jsx)("button",{className:ne.a.logout,onClick:r,children:"Logout"})]}):Object(S.jsx)(v.b,{to:"/login",children:"Login"})})]})},ae=Object(M.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{logout:u.d})(re),se=n(96),ce=n(134),ie=n(69),oe=n(52),ue=n(75),le=n.n(ue),de=n(77),fe=n.n(de),be=Object(ce.a)({form:"login"})((function(e){var t=e.handleSubmit,n=e.error,r=e.captchaUrl;return Object(S.jsxs)("form",{className:fe.a.form,onSubmit:t,children:[Object(S.jsx)("div",{children:Object(S.jsx)(se.a,{placeholder:"Email",name:"email",component:oe.b,validate:[ie.b]})}),Object(S.jsx)("div",{children:Object(S.jsx)(se.a,{placeholder:"Password",name:"password",component:oe.b,type:"password",validate:[ie.b]})}),Object(S.jsxs)("div",{className:le.a.checkbox,children:[Object(S.jsx)("div",{children:Object(S.jsx)(se.a,{type:"checkbox",name:"rememberMe",component:oe.a})}),Object(S.jsx)("label",{htmlFor:"rememberMe",children:"remember me"})]}),r&&Object(S.jsx)("img",{src:r,alt:""}),r&&Object(S.jsx)(se.a,{placeholder:"Symbols from image",name:"captcha",component:oe.b,validate:[ie.b]}),n&&Object(S.jsx)("div",{children:Object(S.jsx)("div",{className:le.a.formSummeryError,children:n})}),Object(S.jsx)("button",{className:le.a.loginBtn,children:"Login"})]})})),je=Object(M.b)((function(e){return{isAuth:e.auth.isAuth,userId:e.auth.userId,captchaUrl:e.auth.captchaUrl}}),{login:u.c,logout:u.d})((function(e){if(e.isAuth)return Object(S.jsx)(_.a,{to:"/profile/"+e.userId});return Object(S.jsxs)("div",{className:"block",children:[Object(S.jsxs)("div",{className:fe.a.form,children:[Object(S.jsx)("h1",{children:"Login"}),Object(S.jsx)(be,{onSubmit:function(t){e.login(t.email,t.password,t.rememberMe,t.captcha)},captchaUrl:e.captchaUrl})]}),Object(S.jsxs)("div",{className:fe.a.test,children:[Object(S.jsx)("h3",{children:"\u0422\u0435\u0441\u0442\u043e\u0432\u044b\u0439 \u0430\u043a\u0430\u0443\u043d\u0442"}),Object(S.jsxs)("p",{children:["Email: ",Object(S.jsx)("strong",{children:"free@samuraijs.com"})]}),Object(S.jsxs)("p",{children:["Password: ",Object(S.jsx)("strong",{children:"free"})]})]})]})})),ge=n(19),pe=n.n(ge),he=function(e){var t=e.userId,n=e.getUserProfile;return Object(S.jsx)("nav",{className:"".concat(pe.a.nav," ","block"),children:Object(S.jsxs)("div",{className:pe.a.links,children:[Object(S.jsx)("div",{className:pe.a.item,children:Object(S.jsx)(v.b,{to:t?"/profile/".concat(t):"/login",onClick:function(){return n(t)},activeClassName:pe.a.active,children:"My profile"})}),Object(S.jsx)("div",{className:pe.a.item,children:Object(S.jsx)(v.b,{to:"/dialogs",activeClassName:pe.a.active,children:"Messages"})}),Object(S.jsx)("div",{className:pe.a.item,children:Object(S.jsx)(v.b,{to:"/news",activeClassName:pe.a.active,children:"News"})}),Object(S.jsx)("div",{className:pe.a.item,children:Object(S.jsx)(v.b,{to:"/music",activeClassName:pe.a.active,children:"Music"})}),Object(S.jsx)("div",{className:pe.a.item,children:Object(S.jsx)(v.b,{to:"/settings",activeClassName:pe.a.active,children:"Settings"})}),Object(S.jsx)("div",{className:pe.a.item,children:Object(S.jsx)(v.b,{to:"/users",activeClassName:pe.a.active,children:"Users"})})]})})},Oe=Object(M.b)((function(e){return{userId:e.auth.userId}}),{getUserProfile:d.d})(he),me=n(60),ve=n.n(me),_e=function(e){var t=e.globalError,n=e.setGlobalError;return Object(S.jsxs)("div",{className:ve.a.errorBlock,children:[Object(S.jsx)("div",{className:ve.a.mainMessage,children:t.mainMessage}),Object(S.jsxs)("div",{className:ve.a.errorMessage,children:["(",t.errorMessage,")"]}),Object(S.jsx)("button",{className:ve.a.button,onClick:function(){n()},children:"\u041e\u043a"})]})},xe=n(41),Pe=n.n(xe),Se=function(e){var t=e.friends,n=e.getUserProfile,r=e.isSidebarHidden,a=t.map((function(e){return Object(S.jsx)(v.b,{to:"/profile/".concat(e.id),onClick:function(){return n(e.id)},children:Object(S.jsxs)("div",{className:Pe.a.sidebarFriend,children:[Object(S.jsx)("img",{className:Pe.a.avatar,src:e.photos.small||X.a,alt:"ava"}),Object(S.jsx)("div",{className:Pe.a.friendName,children:e.name})]})},e.id)}));return Object(S.jsxs)("div",{className:"".concat(Pe.a.sidebar," ","block"," ").concat(r?Pe.a.hidden:""),children:[Object(S.jsx)("div",{className:Pe.a.heading,children:"Friends"}),a]})},Fe=Object(M.b)((function(e){return{friends:e.usersPage.friends,sidebarSize:e.usersPage.sidebarSize,isSidebarHidden:e.app.isSidebarHidden}}),{requestFriends:f.c,getUserProfile:d.d,setIsSidebarHidden:g.d})((function(e){var t=e.sidebarSize,n=e.friends,a=e.getUserProfile,s=e.requestFriends,c=e.isSidebarHidden,i=e.setIsSidebarHidden;return Object(r.useEffect)((function(){s(1,t),0!==n.length&&i(!1)}),[n.length,s,i,t]),Object(S.jsx)(Se,{friends:n,getUserProfile:a,isSidebarHidden:c})})),we=a.a.lazy((function(){return n.e(4).then(n.bind(null,309))})),Ee=a.a.lazy((function(){return n.e(3).then(n.bind(null,310))})),Ne=Object(M.b)((function(e){return{initialized:e.app.initialized,globalError:e.app.globalError,friends:e.usersPage.friends}}),{initializeApp:g.b,setGlobalError:g.c})((function(e){var t=e.initialized,n=e.globalError,a=e.initializeApp,s=e.setGlobalError;return Object(r.useEffect)((function(){var e=function(e){s("\u041d\u0435\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430",e.reason)};return a(),window.addEventListener("unhandledrejection",e),window.removeEventListener("unhandledrejection",e)}),[a,s]),t?Object(S.jsxs)(v.a,{children:[Object(S.jsx)(ae,{}),Object(S.jsxs)("div",{className:"app-wrapper",children:[n.mainMessage&&Object(S.jsx)(_e,{globalError:n,setGlobalError:s}),Object(S.jsxs)("div",{children:[Object(S.jsx)(Oe,{}),Object(S.jsx)(Fe,{})]}),Object(S.jsx)(r.Suspense,{fallback:Object(S.jsx)(T.a,{}),children:Object(S.jsxs)(_.d,{children:[Object(S.jsx)(_.a,{exact:!0,from:"/",to:"/profile"}),Object(S.jsx)(_.b,{path:"/dialogs",component:we}),Object(S.jsx)(_.b,{path:"/profile/:userId?",component:Ee}),Object(S.jsx)(_.b,{path:"/news",component:F}),Object(S.jsx)(_.b,{path:"/music",component:N}),Object(S.jsx)(_.b,{path:"/settings",component:k}),Object(S.jsx)(_.b,{path:"/users",component:ee}),Object(S.jsx)(_.b,{path:"/login",component:je}),Object(S.jsx)(_.b,{path:"*",render:function(){return Object(S.jsx)("div",{className:"block",children:"404 - PAGE NOT FOUND"})}})]})})]})]}):Object(S.jsx)(T.a,{})}));c.a.render(Object(S.jsx)(M.a,{store:m,children:Object(S.jsx)(Ne,{})}),document.getElementById("root")),i()},40:function(e,t,n){e.exports={scrollPages:"Pagination_scrollPages__3ZJ0F",numberPage:"Pagination_numberPage__2pw8l",selectedPage:"Pagination_selectedPage__1e311"}},41:function(e,t,n){e.exports={sidebar:"Sidebar_sidebar__37NVi",avatar:"Sidebar_avatar__niNtw",sidebarFriend:"Sidebar_sidebarFriend__2GBq2",friendName:"Sidebar_friendName__2ChZ2",heading:"Sidebar_heading__2-UmF",hidden:"Sidebar_hidden__1HBYl"}},47:function(e,t,n){e.exports={follow:"FollowUnfollowButton_follow__3lCoS",unfollow:"FollowUnfollowButton_unfollow__3bi9r",button:"FollowUnfollowButton_button__1dUTd",hidden:"FollowUnfollowButton_hidden__1pMuL"}},51:function(e,t,n){"use strict";var r=n(143),a=n.n(r),s=n(0);t.a=function(e){return Object(s.jsxs)("div",{className:a.a.lds_roller+" "+e.className,children:[Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{})]})}},52:function(e,t,n){"use strict";n.d(t,"d",(function(){return g})),n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return O})),n.d(t,"e",(function(){return m}));var r=n(2),a=n(146),s=(n(1),n(96)),c=n(144),i=n.n(c),o=n(99),u=n.n(o),l=n(145),d=n.n(l),f=n(0),b=["input","meta"],j=function(e,t){return function(n){var s=n.input,c=n.meta,i=c.touched,o=c.error,u=Object(a.a)(n,b),l=i&&o;return Object(f.jsxs)("div",{className:t.block,children:[Object(f.jsx)(e,Object(r.a)(Object(r.a)(Object(r.a)({},s),u),{},{className:t.field+" "+(l?t.errorField:"")})),l&&Object(f.jsx)("div",{className:t.error,children:o})]})}},g=j("textarea",i.a),p=j("input",u.a),h=j("input",d.a),O=j("input",u.a),m=function(e,t,n,a){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return Object(f.jsx)(s.a,Object(r.a)({placeholder:e,name:t,validate:n,component:a},c))}},60:function(e,t,n){e.exports={errorBlock:"ErrorMessage_errorBlock__3_pNj",button:"ErrorMessage_button__1KcLA",mainMessage:"ErrorMessage_mainMessage__1Fq-L",errorMessage:"ErrorMessage_errorMessage__2IH_k"}},61:function(e,t,n){"use strict";t.a=n.p+"static/media/1.e36dde25.png"},69:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var r=function(e){if(!e)return"Field is required"},a=function(e){return function(t){if(t.length>e)return"Max length is ".concat(e," symbols")}}},75:function(e,t,n){e.exports={formControl:"FormsControls_formControl__2OAWu",error:"FormsControls_error__CJKw9",formSummeryError:"FormsControls_formSummeryError__3xO10",checkbox:"FormsControls_checkbox__beWy1",loginBtn:"FormsControls_loginBtn__1jXYH"}},76:function(e,t,n){e.exports={header:"Header_header__2jC4j",loginBlock:"Header_loginBlock__18G30",logout:"Header_logout__1gBgl"}},77:function(e,t,n){e.exports={form:"Login_form__1mEHP",test:"Login_test__sNFCp"}},99:function(e,t,n){e.exports={block:"InputProfileInfo_block__2_9WD",field:"InputProfileInfo_field__2t2br",errorField:"InputProfileInfo_errorField__3ecPA",error:"InputProfileInfo_error__1cHdL"}}},[[300,1,2]]]);
//# sourceMappingURL=main.0fa859f0.chunk.js.map