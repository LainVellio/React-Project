(this["webpackJsonpreact-1"]=this["webpackJsonpreact-1"]||[]).push([[0],{12:function(e,t,s){e.exports={description_block:"ProfileInfo_description_block__MX-KF",avatar:"ProfileInfo_avatar__10tuR",img_block:"ProfileInfo_img_block__3sDTt",description:"ProfileInfo_description__kAfsx",fullName:"ProfileInfo_fullName__3wIER",description_string:"ProfileInfo_description_string__2aCAe",label:"ProfileInfo_label__1XLtO",status:"ProfileInfo_status__3Qor8",value:"ProfileInfo_value__-YsCS",pointer:"ProfileInfo_pointer__2zYFm",statusBlock:"ProfileInfo_statusBlock__3-ogS",input:"ProfileInfo_input__ErjSP",statusPreloader:"ProfileInfo_statusPreloader__F7u6l"}},131:function(e,t,s){e.exports={news:"News_news__3b_Ht"}},132:function(e,t,s){e.exports={music:"Music_music__2ozzY"}},133:function(e,t,s){e.exports={settings:"Settings_settings__1O3ZQ"}},134:function(e,t,s){e.exports={lds_roller:"Preloader_lds_roller__36ydK"}},135:function(e,t,s){e.exports={profile:"Profile_profile__12exf"}},14:function(e,t,s){e.exports={avatar:"Users_avatar__245Zb",numberPage:"Users_numberPage__ps8mJ",selectedPage:"Users_selectedPage__2eYKS",leftBlock:"Users_leftBlock__2mXjK",rightBlock:"Users_rightBlock__tpx-n",name:"Users_name__RYCWc",status:"Users_status__2hB2k",follow:"Users_follow__7Iv5o",unfollow:"Users_unfollow__3EBLi",button:"Users_button__23ZxS",scrollPages:"Users_scrollPages__3R7Sz",friendButton:"Users_friendButton__ehvkF",allUsersButton:"Users_allUsersButton__1doSI",showFriends:"Users_showFriends__21BCl"}},16:function(e,t,s){e.exports={nav:"Navbar_nav__3tJyT",links:"Navbar_links__20KC5",item:"Navbar_item__1Uyvu",active:"Navbar_active__leOmI"}},166:function(e,t,s){},246:function(e,t,s){},25:function(e,t,s){e.exports={dialogs:"Dialogs_dialogs__2UnvQ",dialog_items:"Dialogs_dialog_items__otVHL",dialog:"Dialogs_dialog__3kSWu",active:"Dialogs_active__1Ra0v",messages:"Dialogs_messages__10WQv",message_mine:"Dialogs_message_mine__1RIjr",message_foreign:"Dialogs_message_foreign__9ACDq",textarea:"Dialogs_textarea__2b3w3",sendButton:"Dialogs_sendButton__2LsXB"}},289:function(e,t,s){"use strict";s.r(t);var a=s(1),n=s.n(a),i=s(64),r=s.n(i),o=(s(166),function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,290)).then((function(t){var s=t.getCLS,a=t.getFID,n=t.getFCP,i=t.getLCP,r=t.getTTFB;s(e),a(e),n(e),i(e),r(e)}))}),c=s(11),l=s(3),u=s(39),d=s(126),j=s.n(d).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"cf519c2f-0be6-47b0-9d84-07de5d7e28d2"}}),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"false";return j.get("users?page=".concat(e,"&count=").concat(t,"&friend=").concat(s)).then((function(e){return e.data}))},b=function(e){return j.post("follow/".concat(e),{}).then((function(e){return e.data}))},f=function(e){return j.delete("follow/".concat(e)).then((function(e){return e.data}))},m=function(){return j.get("auth/me").then((function(e){return e.data}))},g=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return j.post("auth/login",{email:e,password:t,rememberMe:s})},h=function(){return j.delete("auth/login")},_=function(e){return j.get("profile/".concat(e)).then((function(e){return e.data}))},O=function(e){return j.get("profile/status/".concat(e))},v=function(e){return j.put("profile/status",{status:e})},x="SET_USER_DATA",P={userId:null,email:null,login:null,isFetching:!1,isAuth:!1},S=function(e,t,s,a){return{type:x,payload:{userId:e,email:t,login:s,isAuth:a}}},N=function(){return function(e){return m().then((function(t){if(0===t.resultCode){var s=t.data,a=s.id,n=s.email,i=s.login;e(S(a,n,i,!0))}}))}},k=function(){return function(e){h().then((function(t){0===t.data.resultCode&&e(S(null,null,null,!1))}))}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(l.a)(Object(l.a)({},e),t.payload);default:return e}},C=s(44),I="SEND-MESSAGE",w={users:[{id:1,name:"Dmitry",avatar:"https://cdn4.iconfinder.com/data/icons/avatars-xmas-giveaway/128/man_male_avatar_portrait-256.png"},{id:2,name:"Alice",avatar:"https://cdn4.iconfinder.com/data/icons/avatars-xmas-giveaway/128/suicide_squad_woman_avatar_joker-128.png"},{id:3,name:"Sergey",avatar:"https://cdn4.iconfinder.com/data/icons/avatars-xmas-giveaway/128/boy_male_avatar_portrait-256.png"},{id:4,name:"Pavel",avatar:"https://cdn4.iconfinder.com/data/icons/avatars-xmas-giveaway/128/punk_man_person_avatar-256.png"},{id:5,name:"Vadim",avatar:"https://cdn4.iconfinder.com/data/icons/avatars-xmas-giveaway/128/scientist_einstein_avatar_professor-256.png"}],messages:[{id:1,message:"\u041f\u0440\u0438\u0432\u0435\u0442",name:"Sergey"},{id:2,message:"\u041a\u0430\u043a \u0434\u0435\u043b\u0430?",name:"Sergey"},{id:3,message:"\u041f\u0440\u0438\u0432\u0435\u0442, \u0443 \u043c\u0435\u043d\u044f \u0432\u0441\u0451 \u0445\u043e\u0440\u043e\u0448\u043e, \u0430 \u0443 \u0442\u0435\u0431\u044f?",name:"Dmitry"},{id:4,message:"\u0422\u043e\u0436\u0435 \u043f\u0440\u0435\u043a\u0440\u0430\u0441\u043d\u043e!",name:"Sergey"},{id:5,message:"\u041a\u043e\u0433\u0434\u0430 \u0432\u0441\u0442\u0440\u0435\u0442\u0438\u043c\u0441\u044f?",name:"Dmitry"}]},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(l.a)(Object(l.a)({},e),{},{messages:[].concat(Object(C.a)(e.messages),[{id:5,message:t.newMessageBody,name:"Dmitry"}])});default:return e}},U=s(88),E=s.n(U),M=s(127),A=function(e,t){var s=e-.5+Math.random()*(t-e+1);return Math.round(s)},B="ADD-POST",L="SET_USER_PROFILE",D="SET_USER_STATUS",T="TOGGLE_IS_FETCHING",z="INITIALIZED_SUCCESS_PROFILE",R={users:[{id:1,name:"Dmitry",avatar:"https://cdn4.iconfinder.com/data/icons/avatars-xmas-giveaway/128/man_male_avatar_portrait-256.png"},{id:2,name:"Alice",avatar:"https://cdn4.iconfinder.com/data/icons/avatars-xmas-giveaway/128/suicide_squad_woman_avatar_joker-128.png"},{id:3,name:"Sergey",avatar:"https://cdn4.iconfinder.com/data/icons/avatars-xmas-giveaway/128/boy_male_avatar_portrait-256.png"},{id:4,name:"Pavel",avatar:"https://cdn4.iconfinder.com/data/icons/avatars-xmas-giveaway/128/punk_man_person_avatar-256.png"},{id:5,name:"Vadim",avatar:"https://cdn4.iconfinder.com/data/icons/avatars-xmas-giveaway/128/scientist_einstein_avatar_professor-256.png"}],posts:[],profile:null,isFetching:!1,status:""},G=function(e,t,s,a){return{type:B,idUserPage:e,message:t,name:s,likesCount:a}},H=function(e){return{type:D,status:e}},q=function(e){return{type:T,isFetching:e}},J=function(e){return function(){var t=Object(M.a)(E.a.mark((function t(s){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s(q(!0)),t.next=3,O(e).then((function(e){s(H(e.data))}));case 3:return t.next=5,_(e).then((function(e){s({type:L,profile:e}),s(q(!1))}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:return Object(l.a)(Object(l.a)({},e),{},{posts:[{idUserPage:t.idUserPage,message:t.message,name:t.name,likesCount:t.likesCount}].concat(Object(C.a)(e.posts))});case L:return Object(l.a)(Object(l.a)({},e),{},{profile:t.profile});case D:return Object(l.a)(Object(l.a)({},e),{},{status:t.status});case T:return Object(l.a)(Object(l.a)({},e),{},{isFetching:t.isFetching});case z:return Object(l.a)(Object(l.a)({},e),{},{initialized:!0});default:return e}},Y={users:[{id:1,name:"Dmitry",avatar:"https://cdn4.iconfinder.com/data/icons/avatars-xmas-giveaway/128/man_male_avatar_portrait-256.png"},{id:2,name:"Alice",avatar:"https://cdn4.iconfinder.com/data/icons/avatars-xmas-giveaway/128/suicide_squad_woman_avatar_joker-128.png"},{id:3,name:"Sergey",avatar:"https://cdn4.iconfinder.com/data/icons/avatars-xmas-giveaway/128/boy_male_avatar_portrait-256.png"},{id:4,name:"Pavel",avatar:"https://cdn4.iconfinder.com/data/icons/avatars-xmas-giveaway/128/punk_man_person_avatar-256.png"},{id:5,name:"Vadim",avatar:"https://cdn4.iconfinder.com/data/icons/avatars-xmas-giveaway/128/scientist_einstein_avatar_professor-256.png"}]},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;return t.type,e},Z="FOLLOW",V="UNFOLLOW",X="SET_USERS",Q="SET_CURRENT_PAGE",$="SET_TOTAL_COUNT",ee="TOGGLE_IS_FETCHING",te="TOGGLE_IS_FOLLOWING_PROGRESS",se="SHIFT_PAGES_LEFT",ae="SHIFT_PAGES_RIGHT",ne="TOGGLE_IS_FRIENDS",ie="SET_FRIENDS",re={users:[],friends:[],pageSize:4,totalUsersCount:0,currentPage:1,beginPage:0,endPage:12,isFetching:!1,isFriends:!1,followingInProgress:[],sidebarSize:5},oe=function(e){return{type:ee,isFetching:e}},ce=function(e,t){return{type:te,isFetching:e,userId:t}},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Z:return Object(l.a)(Object(l.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(l.a)(Object(l.a)({},e),{},{followed:!0}):e}))});case V:return Object(l.a)(Object(l.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(l.a)(Object(l.a)({},e),{},{followed:!1}):e}))});case X:return Object(l.a)(Object(l.a)({},e),{},{users:t.users});case ie:return Object(l.a)(Object(l.a)({},e),{},{friends:t.friends});case Q:return Object(l.a)(Object(l.a)({},e),{},{currentPage:t.currentPage});case $:return Object(l.a)(Object(l.a)({},e),{},{totalUsersCount:t.totalUsersCount});case ee:return Object(l.a)(Object(l.a)({},e),{},{isFetching:t.isFetching});case te:return Object(l.a)(Object(l.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(C.a)(e.followingInProgress),[t.userId]):[e.followingInProgress.filter((function(e){return e!==t.userId}))]});case se:case ae:return Object(l.a)(Object(l.a)({},e),{},{beginPage:t.beginPage,endPage:t.endPage});case ne:return Object(l.a)(Object(l.a)({},e),{},{isFriends:t.isFriends});default:return e}},ue=s(128),de=s(125),je="INITIALIZED_SUCCESS",pe={initialized:!1},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case je:return Object(l.a)(Object(l.a)({},e),{},{initialized:!0});default:return e}},fe=Object(c.c)({profilePage:W,dialogsPage:F,sidebar:K,usersPage:le,auth:y,form:de.a,app:be}),me=Object(c.e)(fe,Object(c.a)(ue.a));window.store=me;var ge=me,he=s(17),_e=s(18),Oe=s(20),ve=s(19),xe=s(13),Pe=s(7),Se=(s(246),s(10)),Ne=s(25),ke=s.n(Ne),ye=s(0),Ce=function(e){var t="/dialogs/"+e.id;return Object(ye.jsx)("div",{className:"".concat(ke.a.dialog),children:Object(ye.jsxs)(xe.b,{to:t,activeClassName:ke.a.active,children:[Object(ye.jsx)("img",{src:e.avatar,alt:"ava"}),Object(ye.jsx)("span",{children:e.name})]})})},Ie=function(e){return Object(ye.jsx)("div",{className:"Dmitry"===e.name?ke.a.message_mine:ke.a.message_foreign,children:Object(ye.jsx)("span",{children:e.message})})},we=s(123),Fe=s(124),Ue=s(136),Ee=s(37),Me=s.n(Ee),Ae=function(e){return function(t){var s=t.input,a=t.meta,n=Object(Ue.a)(t,["input","meta"]),i=a.touched&&a.error;return Object(ye.jsxs)("div",{className:Me.a.formControl+" "+(i?Me.a.error:""),children:[Object(ye.jsx)(e,Object(l.a)(Object(l.a)({},s),n)),i&&Object(ye.jsx)("span",{children:a.error})]})}},Be=Ae("textarea"),Le=Ae("input"),De=function(e){if(!e)return"Field is required"},Te=function(e){return function(t){if(t.length>e)return"Max length is ".concat(e," symbols")}},ze=function(e){var t=e.dialogsPage,s=t.users.map((function(e){return Object(ye.jsx)(Ce,{name:e.name,id:e.id,avatar:e.avatar},e.id)})),a=t.messages.map((function(e){return Object(ye.jsx)(Ie,{message:e.message,name:e.name},e.id)}));if(!e.isAuth)return Object(ye.jsx)(Pe.a,{to:"/login"});var n=Te(100),i=Object(Fe.a)({form:"dialogAddMessageForm"})((function(e){return Object(ye.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(ye.jsx)(we.a,{className:ke.a.textarea,name:"newMessageBody",component:Be,validate:[De,n]}),Object(ye.jsx)("button",{className:ke.a.sendButton,children:"Send"})]})}));return Object(ye.jsxs)("div",{className:ke.a.dialogs,children:[Object(ye.jsx)("div",{children:Object(ye.jsx)("div",{className:"".concat(ke.a.dialog_items," ","block"),children:s})}),Object(ye.jsx)("div",{children:Object(ye.jsxs)("div",{className:"".concat(ke.a.messages," ","block"),children:[a,Object(ye.jsx)(i,{onSubmit:function(t){e.sendMessage(t.newMessageBody)}})]})})]})},Re=function(e){return{isAuth:e.auth.isAuth}},Ge=Object(c.d)(Object(Se.b)((function(e){return{dialogsPage:e.dialogsPage}}),{sendMessage:function(e){return{type:I,newMessageBody:e}}}),(function(e){var t=function(t){Object(Oe.a)(a,t);var s=Object(ve.a)(a);function a(){return Object(he.a)(this,a),s.apply(this,arguments)}return Object(_e.a)(a,[{key:"render",value:function(){return this.props.isAuth?Object(ye.jsx)(e,Object(l.a)({},this.props)):Object(ye.jsx)(Pe.a,{to:"/login"})}}]),a}(n.a.Component);return Object(Se.b)(Re)(t)}))(ze),He=s(131),qe=s.n(He),Je=function(e){return Object(ye.jsx)("div",{className:"".concat(qe.a.news," ","block"),children:"News"})},We=s(132),Ye=s.n(We),Ke=function(e){return Object(ye.jsx)("div",{className:"".concat(Ye.a.music," ","block"),children:"Music"})},Ze=s(133),Ve=s.n(Ze),Xe=function(e){return Object(ye.jsx)("div",{className:"".concat(Ve.a.settings," ","block"),children:"Settings"})},Qe=s(54),$e=s.n(Qe),et=s.p+"static/media/1.e36dde25.png",tt=function(e){Object(Oe.a)(s,e);var t=Object(ve.a)(s);function s(){return Object(he.a)(this,s),t.apply(this,arguments)}return Object(_e.a)(s,[{key:"componentDidMount",value:function(){this.props.requestFriends(1,this.props.sidebarSize)}},{key:"render",value:function(){var e=function(e){var t=e.friends.map((function(t){return Object(ye.jsx)(xe.b,{to:"/profile/".concat(t.id),onClick:function(){return e.getUserProfile(t.id)},children:Object(ye.jsxs)("div",{className:$e.a.sidebarFriend,children:[Object(ye.jsx)("img",{className:$e.a.avatar,src:t.photos.small||et,alt:"ava"}),Object(ye.jsx)("div",{className:$e.a.friendName,children:t.name})]})})}));return Object(ye.jsx)("div",{className:"".concat($e.a.sidebar," ","block"),children:t})};return Object(ye.jsx)(e,{friends:this.props.friends,getUserProfile:this.props.getUserProfile})}}]),s}(n.a.Component),st=Object(Se.b)((function(e){return{friends:e.usersPage.friends,sidebarSize:e.usersPage.sidebarSize}}),{requestFriends:function(e,t){return function(s){p(e,t,!0).then((function(e){var t;s((t=e.items,{type:ie,friends:t}))}))}},getUserProfile:J})(tt),at=s(14),nt=s.n(at),it=s(134),rt=s.n(it),ot=function(e){return Object(ye.jsxs)("div",{className:rt.a.lds_roller,children:[Object(ye.jsx)("div",{}),Object(ye.jsx)("div",{}),Object(ye.jsx)("div",{}),Object(ye.jsx)("div",{}),Object(ye.jsx)("div",{}),Object(ye.jsx)("div",{}),Object(ye.jsx)("div",{}),Object(ye.jsx)("div",{})]})},ct=function(e){for(var t=Math.ceil(e.totalUsersCount/e.pageSize),s=[],a=1;a<=t;a+=1)s.push(a);return Object(ye.jsxs)("div",{className:"block",children:[Object(ye.jsxs)("div",{className:nt.a.scrollPages,children:[Object(ye.jsx)("button",{className:"".concat(nt.a.numberPage),onClick:function(){e.onShiftPagesLeft()},children:"< "}),s.map((function(t){return Object(ye.jsxs)("span",{className:"".concat(e.currentPage===t&&nt.a.selectedPage," ").concat(nt.a.numberPage),onClick:function(){e.onPageChanged(t)},children:["  ",t]})})).slice(e.beginPage,e.endPage),Object(ye.jsx)("button",{className:"".concat(nt.a.numberPage),onClick:function(){e.onShiftPagesRight()},children:" >"})]}),e.isFetching?Object(ye.jsx)(ot,{}):e.users.map((function(t){return Object(ye.jsxs)("div",{className:"".concat(nt.a.user," ","block"),children:[Object(ye.jsxs)("div",{className:nt.a.leftBlock,children:[Object(ye.jsx)("div",{children:Object(ye.jsx)(xe.b,{to:"/profile/"+t.id,children:Object(ye.jsx)("img",{className:nt.a.avatar,src:null!=t.photos.small?t.photos.small:et,alt:"ava"})})}),Object(ye.jsx)("div",{children:t.followed?Object(ye.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),className:"".concat(nt.a.button," ").concat(nt.a.follow),onClick:function(){e.unfollow(t.id)},children:"Follow"}):Object(ye.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),className:"".concat(nt.a.button," ").concat(nt.a.unfollow),onClick:function(){e.follow(t.id)},children:"UnFollow"})})]}),Object(ye.jsx)("div",{className:nt.a.rightBlock,children:Object(ye.jsxs)(xe.b,{to:"/profile/"+t.id,children:[Object(ye.jsx)("div",{className:nt.a.name,children:t.name}),Object(ye.jsx)("div",{className:nt.a.status,children:t.status})]})})]},t.id)})),Object(ye.jsx)("div",{className:nt.a.friendButton,children:e.isFriends?Object(ye.jsx)("button",{className:nt.a.allUsersButton,onClick:function(){console.log(e.isFriends),e.toggleIsFriends(!1)},children:"All Users"}):Object(ye.jsx)("button",{className:nt.a.showFriends,onClick:function(){console.log(e.isFriends),e.toggleIsFriends(!0)},children:"Show Friends"})})]})},lt=function(e){return e.usersPage.users},ut=function(e){return e.usersPage.pageSize},dt=function(e){return e.usersPage.totalUsersCount},jt=function(e){return e.usersPage.currentPage},pt=function(e){return e.usersPage.isFetching},bt=function(e){return e.usersPage.followingInProgress},ft=function(e){return e.usersPage.beginPage},mt=function(e){return e.usersPage.endPage},gt=function(e){Object(Oe.a)(s,e);var t=Object(ve.a)(s);function s(){var e;Object(he.a)(this,s);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).onPageChanged=function(t){e.props.requestUsers(t,e.props.pageSize,e.props.isFriends),e.props.setCurrentPage(t)},e.onShiftPagesLeft=function(){1!==e.props.currentPage&&(e.onPageChanged(e.props.currentPage-1),0!==e.props.beginPage&&e.props.shiftPagesLeft(e.props.beginPage-1,e.props.endPage-1))},e.onShiftPagesRight=function(){var t=Math.ceil(e.props.totalUsersCount/e.props.pageSize);e.props.currentPage!==t&&(e.onPageChanged(e.props.currentPage+1),e.props.endPage!==t&&e.props.shiftPagesRight(e.props.beginPage+1,e.props.endPage+1))},e}return Object(_e.a)(s,[{key:"componentDidMount",value:function(){this.props.requestUsers(this.props.currentPage,this.props.pageSize,this.props.isFriends)}},{key:"componentDidUpdate",value:function(e,t){e.isFriends!==this.props.isFriends&&this.props.requestUsers(this.props.currentPage,this.props.pageSize,this.props.isFriends)}},{key:"render",value:function(){return Object(ye.jsx)(ye.Fragment,{children:Object(ye.jsx)(ct,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,users:this.props.users,isFetching:this.props.isFetching,beginPage:this.props.beginPage,endPage:this.props.endPage,followingInProgress:this.props.followingInProgress,onPageChanged:this.onPageChanged,onShiftPagesLeft:this.onShiftPagesLeft,onShiftPagesRight:this.onShiftPagesRight,follow:this.props.follow,unfollow:this.props.unfollow,toggleIsFriends:this.props.toggleIsFriends,isFriends:this.props.isFriends})})}}]),s}(n.a.Component),ht=Object(Se.b)((function(e){return{users:lt(e),pageSize:ut(e),totalUsersCount:dt(e),currentPage:jt(e),isFetching:pt(e),followingInProgress:bt(e),beginPage:ft(e),endPage:mt(e),isFriends:e.usersPage.isFriends}}),{follow:function(e){return function(t){t(ce(!0,e)),b(e).then((function(s){0===s.resultCode&&t(function(e){return{type:Z,userId:e}}(e)),t(ce(!1,e))}))}},unfollow:function(e){return function(t){t(ce(!0,e)),f(e).then((function(s){0===s.resultCode&&t(function(e){return{type:V,userId:e}}(e)),t(ce(!1,e))}))}},setCurrentPage:function(e){return{type:Q,currentPage:e}},shiftPagesLeft:function(e,t){return{type:se,beginPage:e,endPage:t}},shiftPagesRight:function(e,t){return{type:ae,beginPage:e,endPage:t}},requestUsers:function(e,t,s){return function(a){a(oe(!0)),p(e,t,s).then((function(e){var t,s;a(oe(!1)),a((t=e.items,{type:X,users:t})),a((s=e.totalCount,{type:$,totalUsersCount:s}))}))}},toggleIsFriends:function(e){return{type:ne,isFriends:e}}})(gt),_t=s(55),Ot=s.n(_t),vt=s(45),xt=s.n(vt),Pt=function(e){return Object(ye.jsxs)("div",{className:xt.a.item,children:[Object(ye.jsx)("img",{src:e.avatar,alt:"Avatar"}),Object(ye.jsx)("span",{className:xt.a.name,children:e.name}),Object(ye.jsx)("div",{className:xt.a.message,children:e.message}),Object(ye.jsxs)("div",{className:xt.a.like,children:[Object(ye.jsxs)("span",{className:xt.a.likeCount,children:[e.likesCount," "]}),Object(ye.jsx)("img",{src:"https://cdn4.iconfinder.com/data/icons/evil-icons-user-interface/64/like-256.png",alt:"like"})]})]})},St=function(e){var t=e.profilePage,s=t.posts.map((function(e){return Object(ye.jsx)(Pt,{name:e.name,message:e.message,likesCount:e.likesCount,avatar:et,idUserPage:e.idUserPage},e.id)})).filter((function(e){return e.props.idUserPage===t.profile.userId})),a=Te(50),n=Object(Fe.a)({form:"newPost"})((function(e){return Object(ye.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(ye.jsx)("div",{children:Object(ye.jsx)(we.a,{className:Ot.a.textarea,name:"post",component:Be,validate:[De,a]})}),Object(ye.jsx)("div",{children:Object(ye.jsx)("button",{className:Ot.a.addPost,type:"submit",children:"Add post"})})]})}));return Object(ye.jsxs)("div",{className:Ot.a.postBlock,children:[Object(ye.jsx)("h3",{children:"My posts"}),Object(ye.jsx)("div",{children:Object(ye.jsx)(n,{onSubmit:function(s){e.addPost(t.profile.userId,s.post,e.auth.login)}})}),Object(ye.jsx)("div",{className:Ot.a.posts,children:s})]})},Nt=Object(Se.b)((function(e){return{profilePage:e.profilePage,auth:e.auth}}),{addPost:function(e,t,s){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return 0===a&&(a=A(0,20)),function(n){n(G(e,t,s,a))}}})(St),kt=s(135),yt=s.n(kt),Ct=s(12),It=s.n(Ct),wt=function(e){var t=[{label:"Facebook:",link:e.profile.contacts.facebook},{label:"Website:",link:e.profile.contacts.website},{label:"\u0412\u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0435:",link:e.profile.contacts.vk},{label:"Twitter:",link:e.profile.contacts.twitter},{label:"Instagram:",link:e.profile.contacts.instagram},{label:"YouTube:",link:e.profile.contacts.youtube},{label:"GitHub:",link:e.profile.contacts.github},{label:"MainLink:",link:e.profile.contacts.mainLink}];return Object(ye.jsx)("div",{children:t.map((function(e){return Object(ye.jsxs)("div",{className:It.a.description_string,children:[Object(ye.jsx)("span",{className:It.a.label,children:e.label}),Object(ye.jsx)("a",{href:e.link,children:e.link})]})}))})},Ft=function(e){Object(Oe.a)(s,e);var t=Object(ve.a)(s);function s(){var e;Object(he.a)(this,s);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={editModeCommonStatus:!1,commonStatus:e.props.status,editModeJobStatus:!1,authUserId:e.props.authUserId,profileUserId:e.props.profile.userId,maxLengthStatus:30},e.activateEditModeCommonStatus=function(){e.setState({editModeCommonStatus:!0})},e.deactivateEditModeCommonStatus=function(){e.setState({editModeCommonStatus:!1}),e.props.updateUserStatus(e.state.commonStatus)},e.onCommonStatusChange=function(t){var s=t.currentTarget.value;e.setState({commonStatus:s.slice(0,e.state.maxLengthStatus)})},e}return Object(_e.a)(s,[{key:"componentDidUpdate",value:function(e,t){e.status!==this.props.status&&this.setState({status:this.props.status})}},{key:"render",value:function(){return Object(ye.jsxs)("div",{className:It.a.statusBlock,children:[Object(ye.jsxs)("div",{className:It.a.description_string,children:[Object(ye.jsx)("div",{className:It.a.label,children:"\u0421\u0442\u0430\u0442\u0443\u0441:"}),this.state.authUserId!==this.state.profileUserId?Object(ye.jsx)("div",{className:It.a.value,children:this.state.commonStatus||"\u0421\u0442\u0430\u0442\u0443\u0441 \u043e\u0442\u0441\u0443\u0442\u0441\u0432\u0443\u0435\u0442"}):this.state.editModeCommonStatus?Object(ye.jsx)("input",{onChange:this.onCommonStatusChange,className:It.a.input,autoFocus:!0,onBlur:this.deactivateEditModeCommonStatus,value:this.state.commonStatus}):Object(ye.jsx)("div",{className:It.a.value+" "+It.a.pointer,onClick:this.activateEditModeCommonStatus,children:this.state.commonStatus||"\u0421\u0442\u0430\u0442\u0443\u0441 \u043e\u0442\u0441\u0443\u0442\u0441\u0432\u0443\u0435\u0442"})]}),Object(ye.jsxs)("div",{className:It.a.description_string,children:[Object(ye.jsx)("div",{className:It.a.label,children:"\u041e \u043f\u043e\u0438\u0441\u043a\u0435 \u0440\u0430\u0431\u043e\u0442\u044b:"}),this.state.editModeJobStatus?Object(ye.jsx)("input",{className:It.a.input,autoFocus:!0,onBlur:this.deactivateEditModeJobStatus,value:this.props.profile.lookingForAJobDescription}):Object(ye.jsx)("div",{className:It.a.value,onClick:this.activateEditModeJobStatus,children:this.props.profile.lookingForAJobDescription})]})]})}}]),s}(n.a.Component),Ut=function(e){return e.profile?Object(ye.jsx)("div",{className:It.a.profile_content,children:Object(ye.jsxs)("div",{className:It.a.description_block,children:[Object(ye.jsx)("img",{className:It.a.avatar,src:e.profile.photos.large||et,alt:"ava"}),Object(ye.jsxs)("div",{className:It.a.description,children:[Object(ye.jsx)("div",{className:It.a.fullName,children:e.profile.fullName}),Object(ye.jsx)(Ft,{profile:e.profile,status:e.status,updateUserStatus:e.updateUserStatus,authUserId:e.authUserId}),Object(ye.jsx)(wt,{profile:e.profile})]})]})}):Object(ye.jsx)(ot,{})},Et=function(e){return Object(ye.jsx)("div",{className:"".concat(yt.a.profile," ","block"),children:e.isFetching?Object(ye.jsx)(ot,{}):Object(ye.jsxs)("div",{children:[Object(ye.jsx)("div",{children:Object(ye.jsx)(Ut,{profile:e.profile,status:e.status,updateUserStatus:e.updateUserStatus,authUserId:e.authUserId})}),Object(ye.jsx)(Nt,{})]})})},Mt=function(e){Object(Oe.a)(s,e);var t=Object(ve.a)(s);function s(){return Object(he.a)(this,s),t.apply(this,arguments)}return Object(_e.a)(s,[{key:"componentDidMount",value:function(){var e=this.props.match.params.userId;e||(e=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.getUserProfile(e)}},{key:"render",value:function(){return Object(ye.jsx)(Et,Object(l.a)(Object(l.a)({},this.props),{},{profile:this.props.profile,authUserId:this.props.authUserId,status:this.props.status,updateUserStatus:this.props.updateUserStatus}))}}]),s}(n.a.Component),At=Object(c.d)(Object(Se.b)((function(e){return{profile:e.profilePage.profile,isFetching:e.profilePage.isFetching,status:e.profilePage.status,authUserId:e.auth.userId,isAuth:e.auth.isAuth}}),{updateUserStatus:function(e){return function(t){v(e).then((function(e){0===e.data.resultCode&&t(H(e.data))}))}},getUserProfile:J,getUserStatus:function(e){return function(t){O(e).then((function(e){t(H(e.data))}))}}}),Pe.f)(Mt),Bt=s(68),Lt=s.n(Bt),Dt=function(e){return Object(ye.jsxs)("header",{className:Lt.a.header,children:[Object(ye.jsx)("img",{src:"https://cdn2.iconfinder.com/data/icons/social-flat-buttons-3/512/tripit-512.png",alt:"logo"}),Object(ye.jsx)("div",{className:Lt.a.loginBlock,children:e.isAuth?Object(ye.jsxs)("div",{children:[e.login,Object(ye.jsx)("button",{className:Lt.a.logout,onClick:e.logout,children:"Logout"})]}):Object(ye.jsx)(xe.b,{to:"/login",children:"Login"})})]})},Tt=function(e){Object(Oe.a)(s,e);var t=Object(ve.a)(s);function s(){return Object(he.a)(this,s),t.apply(this,arguments)}return Object(_e.a)(s,[{key:"render",value:function(){return Object(ye.jsx)(Dt,Object(l.a)({},this.props))}}]),s}(n.a.Component),zt=Object(Se.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{logout:k})(Tt),Rt=s(69),Gt=s.n(Rt),Ht=Object(Fe.a)({form:"login"})((function(e){return Object(ye.jsxs)("form",{className:Gt.a.form,onSubmit:e.handleSubmit,children:[Object(ye.jsx)("div",{children:Object(ye.jsx)(we.a,{placeholder:"Email",name:"email",component:Le,validate:[De]})}),Object(ye.jsx)("div",{children:Object(ye.jsx)(we.a,{placeholder:"Password",name:"password",component:Le,type:"password",validate:[De]})}),Object(ye.jsxs)("div",{className:Me.a.checkbox,children:[Object(ye.jsx)("div",{children:Object(ye.jsx)(we.a,{type:"checkbox",name:"rememberMe",component:Le})}),Object(ye.jsx)("label",{htmlFor:"rememberMe",children:"remember me"})]}),e.error&&Object(ye.jsx)("div",{children:Object(ye.jsx)("div",{className:Me.a.formSummeryError,children:e.error})}),Object(ye.jsx)("button",{className:Me.a.loginBtn,children:"Login"})]})})),qt=Object(Se.b)((function(e){return{isAuth:e.auth.isAuth,userId:e.auth.userId}}),{login:function(e,t,s){return function(a){g(e,t,s).then((function(e){if(0===e.data.resultCode)a(N());else{var t=e.data.messages.length>0?e.data.messages[0]:"Some error";a(Object(u.a)("login",{_error:t}))}}))}},logout:k})((function(e){if(e.isAuth)return Object(ye.jsx)(Pe.a,{to:"/profile/"+e.userId});return Object(ye.jsxs)("div",{className:"block",children:[Object(ye.jsxs)("div",{className:Gt.a.form,children:[Object(ye.jsx)("h1",{children:"Login"}),Object(ye.jsx)(Ht,{onSubmit:function(t){e.login(t.email,t.password,t.rememberMe)}})]}),Object(ye.jsxs)("div",{className:Gt.a.test,children:[Object(ye.jsx)("h3",{children:"\u0422\u0435\u0441\u0442\u043e\u0432\u044b\u0439 \u0430\u043a\u0430\u0443\u043d\u0442"}),Object(ye.jsxs)("p",{children:["Email: ",Object(ye.jsx)("strong",{children:"free@samuraijs.com"})]}),Object(ye.jsxs)("p",{children:["Password: ",Object(ye.jsx)("strong",{children:"free"})]})]})]})})),Jt=s(16),Wt=s.n(Jt),Yt=function(e){return Object(ye.jsx)("nav",{className:"".concat(Wt.a.nav," ","block"),children:Object(ye.jsxs)("div",{className:Wt.a.links,children:[Object(ye.jsx)("div",{className:Wt.a.item,children:Object(ye.jsx)(xe.b,{to:e.userId?"/profile/".concat(e.userId):"/login",onClick:function(){return e.getUserProfile(e.userId)},activeClassName:Wt.a.active,children:"My profile"})}),Object(ye.jsx)("div",{className:Wt.a.item,children:Object(ye.jsx)(xe.b,{to:"/dialogs",activeClassName:Wt.a.active,children:"Messages"})}),Object(ye.jsx)("div",{className:Wt.a.item,children:Object(ye.jsx)(xe.b,{to:"/news",activeClassName:Wt.a.active,children:"News"})}),Object(ye.jsx)("div",{className:Wt.a.item,children:Object(ye.jsx)(xe.b,{to:"/music",activeClassName:Wt.a.active,children:"Music"})}),Object(ye.jsx)("div",{className:Wt.a.item,children:Object(ye.jsx)(xe.b,{to:"/settings",activeClassName:Wt.a.active,children:"Settings"})}),Object(ye.jsx)("div",{className:Wt.a.item,children:Object(ye.jsx)(xe.b,{to:"/users",activeClassName:Wt.a.active,children:"Users"})})]})})},Kt=Object(Se.b)((function(e){return{userId:e.auth.userId}}),{getUserProfile:J})(Yt),Zt=function(e){Object(Oe.a)(s,e);var t=Object(ve.a)(s);function s(){return Object(he.a)(this,s),t.apply(this,arguments)}return Object(_e.a)(s,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?Object(ye.jsxs)(xe.a,{children:[Object(ye.jsx)(zt,{}),Object(ye.jsxs)("div",{className:"app-wrapper",children:[Object(ye.jsxs)("div",{children:[Object(ye.jsx)(Kt,{}),Object(ye.jsx)(st,{users:ge.getState().sidebar.users})]}),Object(ye.jsx)(Pe.b,{path:"/dialogs",render:function(){return Object(ye.jsx)(Ge,{})}}),Object(ye.jsx)(Pe.b,{path:"/profile/:userId?",render:function(){return Object(ye.jsx)(At,{})}}),Object(ye.jsx)(Pe.b,{path:"/news",component:Je}),Object(ye.jsx)(Pe.b,{path:"/music",component:Ke}),Object(ye.jsx)(Pe.b,{path:"/settings",component:Xe}),Object(ye.jsx)(Pe.b,{path:"/users",component:ht}),Object(ye.jsx)(Pe.b,{path:"/login",component:qt})]})]}):Object(ye.jsx)(ot,{})}}]),s}(n.a.Component),Vt=Object(Se.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){var t=e(N());Promise.all([t]).then((function(){return e({type:je})}))}}})(Zt);r.a.render(Object(ye.jsx)(n.a.StrictMode,{children:Object(ye.jsx)(xe.a,{children:Object(ye.jsx)(Se.a,{store:ge,children:Object(ye.jsx)(Vt,{})})})}),document.getElementById("root")),o()},37:function(e,t,s){e.exports={formControl:"FormsControls_formControl__2OAWu",error:"FormsControls_error__CJKw9",formSummeryError:"FormsControls_formSummeryError__3xO10",checkbox:"FormsControls_checkbox__beWy1",loginBtn:"FormsControls_loginBtn__1jXYH"}},45:function(e,t,s){e.exports={item:"Post_item__3uvmH",message:"Post_message__3GDoI",like:"Post_like__3au4h",likeCount:"Post_likeCount__1J2qP",name:"Post_name__2qhZM"}},54:function(e,t,s){e.exports={sidebar:"Sidebar_sidebar__37NVi",avatar:"Sidebar_avatar__niNtw",sidebarFriend:"Sidebar_sidebarFriend__2GBq2",friendName:"Sidebar_friendName__2ChZ2"}},55:function(e,t,s){e.exports={postBlock:"MyPosts_postBlock__Hm9zY",posts:"MyPosts_posts__2gzhS",textarea:"MyPosts_textarea__KD-rf",addPost:"MyPosts_addPost__HqCk2"}},68:function(e,t,s){e.exports={header:"Header_header__2jC4j",loginBlock:"Header_loginBlock__18G30",logout:"Header_logout__1gBgl"}},69:function(e,t,s){e.exports={form:"Login_form__1mEHP",test:"Login_test__sNFCp"}}},[[289,1,2]]]);
//# sourceMappingURL=main.0db64469.chunk.js.map